From cbbrowne at afilias.info  Wed Jul  6 09:05:33 2011
From: cbbrowne at afilias.info (Christopher Browne)
Date: Wed, 6 Jul 2011 12:05:33 -0400
Subject: [Slony1-hackers] pgindent run
Message-ID: <CANfbgbaZrNNpZvmpb5HhK5=++MPX2iiP1sfjSLcfo1u2qybPXA@mail.gmail.com>

At some point, we should run pgindent against the codebase to bring
things back 'within policy' as far as indentation is concerned.

FYI, I have done a "test run" against the present state of master:
  <https://github.com/cbbrowne/slony1-engine/commit/bd2780a48d82563f9dad63c746dc1fb7ae57926e>

I did it based on the latest typedefs in PG HEAD:

postgres at cbbrowne [12:03:41] [~/slony1-engine.github/src] [indent-master *]
-> % for i in */*.c; do
for> pgindent /var/lib/postgresql/postgresql/src/tools/pgindent/typedefs.list $i
for> done

slonik/parser.c
Error at 459:
Error at 505:
#if stack overflowUnmatched #endif
slony_logshipper/parser.c
Error at 387:
Error at 433:
#if stack overflowUnmatched #endif%

It induces quite a lot of "churn," which is not something we'd likely
want to do just now, as there are a number of branches where work is
ongoing, and it would decidedly make merging less convenient.

Perhaps we run it as one of the final steps of preparing 2.1?

From cbbrowne at afilias.info  Fri Jul  8 15:57:52 2011
From: cbbrowne at afilias.info (Christopher Browne)
Date: Fri, 8 Jul 2011 18:57:52 -0400
Subject: [Slony1-hackers] Bug #218 - in progress
Message-ID: <CANfbgbYGgOhj_VjGjfq7KMa8VVrwLRDCxnwEb2DJNPyLEtNaJA@mail.gmail.com>

I have a would-be merge-in of the latest bug#218 changes under way;
hopefully will complete that Monday.

I ran thru the regression tests, and had a pretty mixed result, as follows:

-> % cat testResult.test.txt
1,17,test1
9,0,testdatestyles
7,20,testddl
18,0,testdeadlockddl
13,0,testinherit
9,0,testinherit
7,28,testmergeset
15,0,testmultipaths
18,0,testmultiplemoves
16,0,testomitcopy
22,0,testschemanames
18,0,testseqnames
20,0,testtabnames
16,0,testutf8

I suspect that the failures indicate something up with my changes, but
that'll take some more poking around that won't be taking place today
:-(.

