From bugzilla-daemon at main.slony.info  Thu Jun  2 13:52:01 2011
From: bugzilla-daemon at main.slony.info (bugzilla-daemon at main.slony.info)
Date: Thu,  2 Jun 2011 13:52:01 -0700 (PDT)
Subject: [Slony1-bugs] [Bug 217] Changing the primary key of a replicated
 table leads to trouble
In-Reply-To: <bug-217-4@http.www.slony.info/bugzilla/>
References: <bug-217-4@http.www.slony.info/bugzilla/>
Message-ID: <20110602205202.0A6F0290DB6@main.slony.info>

http://www.slony.info/bugzilla/show_bug.cgi?id=217

--- Comment #9 from Steve Singer <ssinger at ca.afilias.info> 2011-06-02 13:52:01 PDT ---
These patches do not work with 9.0

tgargs in pg_trigger is now stored in a different format.

Does anyone know how to decode this? 
In a way that works in all versions of PG?

-- 
Configure bugmail: http://www.slony.info/bugzilla/userprefs.cgi?tab=email
------- You are receiving this mail because: -------
You are on the CC list for the bug.
You are the assignee for the bug.

From bugzilla-daemon at main.slony.info  Fri Jun  3 11:58:32 2011
From: bugzilla-daemon at main.slony.info (bugzilla-daemon at main.slony.info)
Date: Fri,  3 Jun 2011 11:58:32 -0700 (PDT)
Subject: [Slony1-bugs] [Bug 217] Changing the primary key of a replicated
 table leads to trouble
In-Reply-To: <bug-217-4@http.www.slony.info/bugzilla/>
References: <bug-217-4@http.www.slony.info/bugzilla/>
Message-ID: <20110603185832.2C1F6290DAD@main.slony.info>

http://www.slony.info/bugzilla/show_bug.cgi?id=217

--- Comment #10 from Steve Singer <ssinger at ca.afilias.info> 2011-06-03 11:58:31 PDT ---
Created an attachment (id=102)
 --> (http://www.slony.info/bugzilla/attachment.cgi?id=102)
updates to the patch for 9.0 support

This update to the patch adds a C function that will decode tgargs in 9.0.

It will also print a warning on tables that need repair but are skipped because
no lock was previously obtained on the table.

-- 
Configure bugmail: http://www.slony.info/bugzilla/userprefs.cgi?tab=email
------- You are receiving this mail because: -------
You are on the CC list for the bug.
You are the assignee for the bug.

From bugzilla-daemon at main.slony.info  Tue Jun  7 13:52:56 2011
From: bugzilla-daemon at main.slony.info (bugzilla-daemon at main.slony.info)
Date: Tue,  7 Jun 2011 13:52:56 -0700 (PDT)
Subject: [Slony1-bugs] [Bug 218] New: slon often has to retry transactions
 due to concurrent update in 2.1.0.b2
Message-ID: <bug-218-4@http.www.slony.info/bugzilla/>

http://www.slony.info/bugzilla/show_bug.cgi?id=218

           Summary: slon often has to retry transactions due to concurrent
                    update in 2.1.0.b2
           Product: Slony-I
           Version: devel
          Platform: PC
        OS/Version: Linux
            Status: NEW
          Severity: enhancement
          Priority: low
         Component: slon
        AssignedTo: slony1-bugs at lists.slony.info
        ReportedBy: ssinger at ca.afilias.info
                CC: slony1-bugs at lists.slony.info
   Estimated Hours: 0.0


Often I see slon having to rollback/retry transactions in 2.1.0.b2 due to 

 could not serialize access due to concurrent update
CONTEXT:  SQL statement "delete from "_slonyregress".sl_listen"
    PL/pgSQL function "rebuildlistenentries" line 5 at SQL statement
    SQL statement "SELECT "_slonyregress".RebuildListenEntries()"
    PL/pgSQL function "storepath_int" line 48 at PERFORM
STATEMENT:  select "_slonyregress".storePath_int(2, 3, 'dbname=slonyregress2
host=localhost port=9432 user=slony password=test', 10); insert into
"_slonyregress".sl_event     (ev_origin, ev_seqno, ev_timestamp,     
ev_snapshot, ev_type , ev_data1, ev_data2, ev_data3, ev_data4    ) values ('3',
'5000000002', '2011-06-07 16:49:12.861808-04', '217337:217337:', 'STORE_PATH',
'2', '3', 'dbname=slonyregress2 host=localhost port=9432 user=slony
password=test', '10'); insert into "_slonyregress".sl_confirm     (con_origin,
con_received, con_seqno, con_timestamp)    values (3, 1, '5000000002', now());
commit transaction;


type errors.  

A run of the regression tests encountered this issue 43 types.  When I run
those tests against REL_2_0_STABLE (2.0.7rc1) I don't get any of those errors.

In one instance of testing a slon kept aborting, retrying and failing on
serialize access errors for many minutes before being lucky enough to make
progress.

-- 
Configure bugmail: http://www.slony.info/bugzilla/userprefs.cgi?tab=email
------- You are receiving this mail because: -------
You are on the CC list for the bug.
You are the assignee for the bug.

