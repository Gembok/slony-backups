From cvsuser  Tue Jan  2 08:47:31 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By xfade: Quick fix: Declaring xxidin STRICT.
Message-ID: <20070102164731.416833FA10@gborg.postgresql.org>

Log Message:
-----------
Quick fix: Declaring xxidin STRICT. This prevents a backend crash in 8.2 when casting NULL to xxid. (We arent checking for NULL in the C function) This still needs a proper fix and investigation as to why this only happens on 8.2 and not on earlier version of PostgreSQL.

Tags:
----
REL_1_2_STABLE

Modified Files:
--------------
    slony1-engine/src/xxid:
        xxid.v74.sql (r1.1.2.1 -> r1.1.2.2)

-------------- next part --------------
Index: xxid.v74.sql
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/src/xxid/Attic/xxid.v74.sql,v
retrieving revision 1.1.2.1
retrieving revision 1.1.2.2
diff -Lsrc/xxid/xxid.v74.sql -Lsrc/xxid/xxid.v74.sql -u -w -r1.1.2.1 -r1.1.2.2
--- src/xxid/xxid.v74.sql
+++ src/xxid/xxid.v74.sql
@@ -1,5 +1,5 @@
 -- ----------
--- xxid.v73.sql.in
+-- xxid.v74.sql.in
 --
 --	SQL script for loading the transaction ID compatible datatype 
 --
@@ -14,7 +14,7 @@
 --
 CREATE FUNCTION @NAMESPACE at ."xxidin"(cstring) RETURNS @NAMESPACE at ."xxid"
 	AS '$libdir/xxid', '_Slony_I_xxidin'
-	LANGUAGE C;
+	LANGUAGE C STRICT;
 CREATE FUNCTION @NAMESPACE at ."xxidout"(@NAMESPACE at ."xxid") RETURNS cstring
 	AS '$libdir/xxid', '_Slony_I_xxidout'
 	LANGUAGE C;

From cvsuser  Tue Jan  2 09:03:28 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Updates per Mark Stosberg
Message-ID: <20070102170328.C4FC33FB0E@gborg.postgresql.org>

Log Message:
-----------
Updates per Mark Stosberg

Modified Files:
--------------
    slony1-engine:
        UPGRADING (r1.1 -> r1.2)

-------------- next part --------------
Index: UPGRADING
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/UPGRADING,v
retrieving revision 1.1
retrieving revision 1.2
diff -LUPGRADING -LUPGRADING -u -w -r1.1 -r1.2
--- UPGRADING
+++ UPGRADING
@@ -1,4 +1,4 @@
-Upgrading from an earlier version of Slony-I to 1.1
+Upgrading from an earlier version of Slony-I to 1.3
 -----------------------------------------------------
 $Id$
 
@@ -17,4 +17,14 @@
 		update functions (id = [whatever]);
 		for each node in the cluster.
 
+  If you installed the "altperl" tools via "./configure --with-altperl",
+  this step may be done more simply, assuming you have a suitable
+  slon_tools.conf file configured.  You may instead run:
+
+  % slonik_update_nodes | slonik
+
 	4. Start all slons. 
+
+Upgrading is also discussed in more detail in the "Admin Guide."
+The section is entitled "Slony-I Upgrade", distributed as
+doc/adminguide/slonyupgrade.html in the documentation package.

From cvsuser  Tue Jan  2 09:04:09 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Updates per Mark Stosberg
Message-ID: <20070102170409.BB0B13FB55@gborg.postgresql.org>

Log Message:
-----------
Updates per Mark Stosberg

Tags:
----
REL_1_2_STABLE

Modified Files:
--------------
    slony1-engine:
        UPGRADING (r1.1 -> r1.1.4.1)

-------------- next part --------------
Index: UPGRADING
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/UPGRADING,v
retrieving revision 1.1
retrieving revision 1.1.4.1
diff -LUPGRADING -LUPGRADING -u -w -r1.1 -r1.1.4.1
--- UPGRADING
+++ UPGRADING
@@ -1,4 +1,4 @@
-Upgrading from an earlier version of Slony-I to 1.1
+Upgrading from an earlier version of Slony-I to 1.2
 -----------------------------------------------------
 $Id$
 
@@ -17,4 +17,14 @@
 		update functions (id = [whatever]);
 		for each node in the cluster.
 
+  If you installed the "altperl" tools via "./configure --with-altperl",
+  this step may be done more simply, assuming you have a suitable
+  slon_tools.conf file configured.  You may instead run:
+
+  % slonik_update_nodes | slonik
+
 	4. Start all slons. 
+
+Upgrading is also discussed in more detail in the "Admin Guide."
+The section is entitled "Slony-I Upgrade", distributed as
+doc/adminguide/slonyupgrade.html in the documentation package.

From cvsuser  Tue Jan  2 09:12:33 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Per Mark Stosberg...
Message-ID: <20070102171233.C17F53FB0E@gborg.postgresql.org>

Log Message:
-----------
Per Mark Stosberg...

- Added inline documentation to these scripts

- slonik_create_set.pl has improved diagnostics, listing the valid set names

Modified Files:
--------------
    slony1-engine/tools/altperl:
        slonik_create_set.pl (r1.4 -> r1.5)
        slonik_drop_node.pl (r1.2 -> r1.3)
        slonik_drop_set.pl (r1.2 -> r1.3)
        slonik_uninstall_nodes.pl (r1.2 -> r1.3)

-------------- next part --------------
Index: slonik_drop_set.pl
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/altperl/slonik_drop_set.pl,v
retrieving revision 1.2
retrieving revision 1.3
diff -Ltools/altperl/slonik_drop_set.pl -Ltools/altperl/slonik_drop_set.pl -u -w -r1.2 -r1.3
--- tools/altperl/slonik_drop_set.pl
+++ tools/altperl/slonik_drop_set.pl
@@ -13,12 +13,24 @@
 GetOptions("config=s" => \$CONFIG_FILE,
 	   "help"     => \$SHOW_USAGE);
 
-my $USAGE =
+my $USAGE = <<EOF
 "Usage: drop_set [--config file] set#
 
     Drops a set.
 
-";
+Much as with DROP NODE, this leads to Slony-I dropping the Slony-I triggers on 
+the tables and restoring "native" triggers. One difference is that this takes 
+place on all nodes in the cluster, rather than on just one node. Another 
+difference is that this does not clear out the Slony-I cluster's namespace, as 
+there might be other sets being serviced. 
+ 
+This operation is quite a bit more dangerous than DROP NODE, as there isn't the 
+same sort of "failsafe." If you tell DROP SET to drop the wrong set, there 
+isn't anything to prevent potentially career-limiting "unfortunate results." 
+Handle with care... 
+
+EOF
+;
 
 if ($SHOW_USAGE) {
   print $USAGE;
Index: slonik_drop_node.pl
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/altperl/slonik_drop_node.pl,v
retrieving revision 1.2
retrieving revision 1.3
diff -Ltools/altperl/slonik_drop_node.pl -Ltools/altperl/slonik_drop_node.pl -u -w -r1.2 -r1.3
--- tools/altperl/slonik_drop_node.pl
+++ tools/altperl/slonik_drop_node.pl
@@ -18,6 +18,20 @@
 
     Drops a node.
 
+This will lead to Slony-I dropping the triggers (generally that deny the
+ability to update data), restoring the \"native\" triggers, dropping the
+schema used by Slony-I, and the slon process for that node terminating
+itself.
+ 
+As a result, the database should be available for whatever use your     
+application makes of the database.                                      
+ 
+This is a pretty major operation, with considerable potential to cause  
+substantial destruction; make sure you drop the right node!             
+ 
+The operation will fail if there are any nodes subscribing to the node  
+that you attempt to drop, so there is a bit of a failsafe to protect    
+you from errors.                                                        
 ";
 
 if ($SHOW_USAGE) {
Index: slonik_create_set.pl
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/altperl/slonik_create_set.pl,v
retrieving revision 1.4
retrieving revision 1.5
diff -Ltools/altperl/slonik_create_set.pl -Ltools/altperl/slonik_create_set.pl -u -w -r1.4 -r1.5
--- tools/altperl/slonik_create_set.pl
+++ tools/altperl/slonik_create_set.pl
@@ -31,8 +31,14 @@
 require $CONFIG_FILE;
 
 my ($set) = @ARGV;
+
+die $USAGE unless $set;
 $SET_ID = get_set($set);
 unless ($SET_ID) {
+    my $possible_sets = join "\n\t", keys %$SLONY_SETS;
+    print "No set was found with the name provided.  Possible valid names include:\n\t"
+          . $possible_sets . "\n\n"
+          . "New sets may be defined in your slon_tools.conf file\n\n";
     die $USAGE;
 }
 
Index: slonik_uninstall_nodes.pl
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/altperl/slonik_uninstall_nodes.pl,v
retrieving revision 1.2
retrieving revision 1.3
diff -Ltools/altperl/slonik_uninstall_nodes.pl -Ltools/altperl/slonik_uninstall_nodes.pl -u -w -r1.2 -r1.3
--- tools/altperl/slonik_uninstall_nodes.pl
+++ tools/altperl/slonik_uninstall_nodes.pl
@@ -18,6 +18,15 @@
 
     Removes Slony configuration from all nodes in a cluster.
 
+Restores all tables to the unlocked state, with all original user       
+triggers, constraints and rules, eventually added Slony-I specific      
+serial key columns dropped and the Slony-I schema dropped. The node     
+becomes a standalone database. The data is left untouched.              
+ 
+The difference between UNINSTALL NODE and DROP NODE is that all         
+UNINSTALL NODE does is to remove the Slony-I configuration; it doesn't  
+drop the node's configuration from replication.                         
+
 ";
 
 if ($SHOW_USAGE) {

From cvsuser  Tue Jan  2 09:16:00 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Per Mark Stosberg...
Message-ID: <20070102171600.6BA2D3FB55@gborg.postgresql.org>

Log Message:
-----------
Per Mark Stosberg...

- Added inline documentation to these scripts

- slonik_create_set.pl has improved diagnostics, listing the valid set names

Tags:
----
REL_1_2_STABLE

Modified Files:
--------------
    slony1-engine/tools/altperl:
        slonik_create_set.pl (r1.3.2.1 -> r1.3.2.2)
        slonik_drop_node.pl (r1.1.4.1 -> r1.1.4.2)
        slonik_drop_set.pl (r1.1.4.1 -> r1.1.4.2)
        slonik_uninstall_nodes.pl (r1.1.4.1 -> r1.1.4.2)

-------------- next part --------------
Index: slonik_drop_set.pl
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/altperl/slonik_drop_set.pl,v
retrieving revision 1.1.4.1
retrieving revision 1.1.4.2
diff -Ltools/altperl/slonik_drop_set.pl -Ltools/altperl/slonik_drop_set.pl -u -w -r1.1.4.1 -r1.1.4.2
--- tools/altperl/slonik_drop_set.pl
+++ tools/altperl/slonik_drop_set.pl
@@ -13,12 +13,24 @@
 GetOptions("config=s" => \$CONFIG_FILE,
 	   "help"     => \$SHOW_USAGE);
 
-my $USAGE =
+my $USAGE = <<EOF
 "Usage: drop_set [--config file] set#
 
     Drops a set.
 
-";
+Much as with DROP NODE, this leads to Slony-I dropping the Slony-I triggers on 
+the tables and restoring "native" triggers. One difference is that this takes 
+place on all nodes in the cluster, rather than on just one node. Another 
+difference is that this does not clear out the Slony-I cluster's namespace, as 
+there might be other sets being serviced. 
+ 
+This operation is quite a bit more dangerous than DROP NODE, as there isn't the 
+same sort of "failsafe." If you tell DROP SET to drop the wrong set, there 
+isn't anything to prevent potentially career-limiting "unfortunate results." 
+Handle with care... 
+
+EOF
+;
 
 if ($SHOW_USAGE) {
   print $USAGE;
Index: slonik_drop_node.pl
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/altperl/slonik_drop_node.pl,v
retrieving revision 1.1.4.1
retrieving revision 1.1.4.2
diff -Ltools/altperl/slonik_drop_node.pl -Ltools/altperl/slonik_drop_node.pl -u -w -r1.1.4.1 -r1.1.4.2
--- tools/altperl/slonik_drop_node.pl
+++ tools/altperl/slonik_drop_node.pl
@@ -18,6 +18,20 @@
 
     Drops a node.
 
+This will lead to Slony-I dropping the triggers (generally that deny the
+ability to update data), restoring the \"native\" triggers, dropping the
+schema used by Slony-I, and the slon process for that node terminating
+itself.
+ 
+As a result, the database should be available for whatever use your     
+application makes of the database.                                      
+ 
+This is a pretty major operation, with considerable potential to cause  
+substantial destruction; make sure you drop the right node!             
+ 
+The operation will fail if there are any nodes subscribing to the node  
+that you attempt to drop, so there is a bit of a failsafe to protect    
+you from errors.                                                        
 ";
 
 if ($SHOW_USAGE) {
Index: slonik_create_set.pl
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/altperl/slonik_create_set.pl,v
retrieving revision 1.3.2.1
retrieving revision 1.3.2.2
diff -Ltools/altperl/slonik_create_set.pl -Ltools/altperl/slonik_create_set.pl -u -w -r1.3.2.1 -r1.3.2.2
--- tools/altperl/slonik_create_set.pl
+++ tools/altperl/slonik_create_set.pl
@@ -31,8 +31,14 @@
 require $CONFIG_FILE;
 
 my ($set) = @ARGV;
+
+die $USAGE unless $set;
 $SET_ID = get_set($set);
 unless ($SET_ID) {
+    my $possible_sets = join "\n\t", keys %$SLONY_SETS;
+    print "No set was found with the name provided.  Possible valid names include:\n\t"
+          . $possible_sets . "\n\n"
+          . "New sets may be defined in your slon_tools.conf file\n\n";
     die $USAGE;
 }
 
Index: slonik_uninstall_nodes.pl
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/altperl/slonik_uninstall_nodes.pl,v
retrieving revision 1.1.4.1
retrieving revision 1.1.4.2
diff -Ltools/altperl/slonik_uninstall_nodes.pl -Ltools/altperl/slonik_uninstall_nodes.pl -u -w -r1.1.4.1 -r1.1.4.2
--- tools/altperl/slonik_uninstall_nodes.pl
+++ tools/altperl/slonik_uninstall_nodes.pl
@@ -18,6 +18,15 @@
 
     Removes Slony configuration from all nodes in a cluster.
 
+Restores all tables to the unlocked state, with all original user       
+triggers, constraints and rules, eventually added Slony-I specific      
+serial key columns dropped and the Slony-I schema dropped. The node     
+becomes a standalone database. The data is left untouched.              
+ 
+The difference between UNINSTALL NODE and DROP NODE is that all         
+UNINSTALL NODE does is to remove the Slony-I configuration; it doesn't  
+drop the node's configuration from replication.                         
+
 ";
 
 if ($SHOW_USAGE) {

From cvsuser  Tue Jan  2 11:34:12 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Code for long running transaction
	check wasn't listing node
Message-ID: <20070102193412.2CB713F9A8@gborg.postgresql.org>

Log Message:
-----------
Code for long running transaction check wasn't listing node ID, making
it painful to search around for which node the problem was associated
with.

Modified Files:
--------------
    slony1-engine/tools:
        test_slony_state-dbi.pl (r1.4 -> r1.5)
        test_slony_state.pl (r1.6 -> r1.7)

-------------- next part --------------
Index: test_slony_state-dbi.pl
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/test_slony_state-dbi.pl,v
retrieving revision 1.4
retrieving revision 1.5
diff -Ltools/test_slony_state-dbi.pl -Ltools/test_slony_state-dbi.pl -u -w -r1.4 -r1.5
--- tools/test_slony_state-dbi.pl
+++ tools/test_slony_state-dbi.pl
@@ -261,7 +261,7 @@
   print "\n";
 
   print "\n------------------------------------------------------------------------------\n";
-  print "\nListing of old open connections\n";
+  printf "\nListing of old open connections on node %d\n", $node;
   printf "%15s %15s %15s %12s %20s\n", "Database", "PID", "User", "Query Age", "Query";
   print "================================================================================\n";
 
Index: test_slony_state.pl
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/test_slony_state.pl,v
retrieving revision 1.6
retrieving revision 1.7
diff -Ltools/test_slony_state.pl -Ltools/test_slony_state.pl -u -w -r1.6 -r1.7
--- tools/test_slony_state.pl
+++ tools/test_slony_state.pl
@@ -252,7 +252,7 @@
   print "\n";
 
   print "\n------------------------------------------------------------------------------\n";
-  print "\nListing of old open connections\n";
+  printf "\nListing of old open connections on node %d\n", $node;
   printf "%15s %15s %15s %12s %20s\n", "Database", "PID", "User", "Query Age", "Query";
   print "================================================================================\n";
 

From cvsuser  Tue Jan  2 12:17:00 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Revisions to documentation and altperl
	code to clarify the
Message-ID: <20070102201700.D88273F9AD@gborg.postgresql.org>

Log Message:
-----------
Revisions to documentation and altperl code to clarify the 9 levels
of logging and their use.

As suggested by Mark Stosberg.

Modified Files:
--------------
    slony1-engine/doc/adminguide:
        loganalysis.sgml (r1.5 -> r1.6)
        slon.sgml (r1.29 -> r1.30)
        slonconf.sgml (r1.14 -> r1.15)
    slony1-engine/src/slon:
        confoptions.c (r1.19 -> r1.20)
    slony1-engine/tools/altperl:
        slon-tools.pm (r1.28 -> r1.29)
        slon_tools.conf-sample (r1.7 -> r1.8)

-------------- next part --------------
Index: slonconf.sgml
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/doc/adminguide/slonconf.sgml,v
retrieving revision 1.14
retrieving revision 1.15
diff -Ldoc/adminguide/slonconf.sgml -Ldoc/adminguide/slonconf.sgml -u -w -r1.14 -r1.15
--- doc/adminguide/slonconf.sgml
+++ doc/adminguide/slonconf.sgml
@@ -86,7 +86,13 @@
         <primary><varname>log_level</varname> configuration parameter</primary>
       </indexterm>
       <listitem>
-        <para>Debug log level (higher value ==> more output).  Range: [0,4], default 4</para>
+        <para>Debug log level (higher value ==> more output).  Range: [0,4], default 2</para>
+
+	<para> There are <link linkend="nineloglevels">nine log
+	message types</link>; using this option, some or all of
+	the <quote>debugging</quote> levels may be left out of the
+	slon logs. </para>
+
       </listitem>
     </varlistentry>
 
Index: slon.sgml
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/doc/adminguide/slon.sgml,v
retrieving revision 1.29
retrieving revision 1.30
diff -Ldoc/adminguide/slon.sgml -Ldoc/adminguide/slon.sgml -u -w -r1.29 -r1.30
--- doc/adminguide/slon.sgml
+++ doc/adminguide/slon.sgml
@@ -40,16 +40,17 @@
   
   <variablelist>
    <varlistentry>
-    <term><option>-d</option><replaceable class="parameter"> debuglevel</replaceable></term>
+    <term><option>-d</option><replaceable class="parameter"> log_level</replaceable></term>
     <listitem>
      <para>
-      The <envar>log_level</envar> specifies which Debug levels
+      The <envar>log_level</envar> specifies which levels of debugging messages
       <application>slon</application> should display when logging its
       activity.
      </para>
-     <para>
-      The eight levels of logging are:
+     <para id="nineloglevels">
+      The nine levels of logging are:
       <itemizedlist>
+       <listitem><para>Fatal</para></listitem>
        <listitem><para>Error</para></listitem>
        <listitem><para>Warn</para></listitem>
        <listitem><para>Config</para></listitem>
@@ -60,11 +61,13 @@
        <listitem><para>Debug4</para></listitem>
       </itemizedlist>
      </para>
-     <para> Thus, <emphasis>all</emphasis> the non-debugging log
-     levels are always displayed in the logs.  If
-     <envar>log_level</envar> is set to 2 (a routine, and, seemingly
+
+     <para> The first five non-debugging log levels (from Fatal to
+     Info) are <emphasis>always</emphasis> displayed in the logs.  If
+     <envar>log_level</envar> is set to 2 (a routine, and, seemingly,
      preferable choice), then output at debugging levels 1 and 2 will
      also be displayed.</para>
+
     </listitem>
    </varlistentry>
    
Index: loganalysis.sgml
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/doc/adminguide/loganalysis.sgml,v
retrieving revision 1.5
retrieving revision 1.6
diff -Ldoc/adminguide/loganalysis.sgml -Ldoc/adminguide/loganalysis.sgml -u -w -r1.5 -r1.6
--- doc/adminguide/loganalysis.sgml
+++ doc/adminguide/loganalysis.sgml
@@ -58,6 +58,12 @@
 
 </variablelist>
 </para>
+
+<para> How much information they display is controlled by
+the <envar>log_level</envar> &lslon; parameter;
+ERROR/WARN/CONFIG/INFO messages will always be displayed, while
+choosing increasing values from 1 to 4 will lead to additional DEBUG
+level messages being displayed. </para>
 </sect2>
 
 <sect2> <title> How to read &slony1; logs </title>
Index: confoptions.c
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/src/slon/confoptions.c,v
retrieving revision 1.19
retrieving revision 1.20
diff -Lsrc/slon/confoptions.c -Lsrc/slon/confoptions.c -u -w -r1.19 -r1.20
--- src/slon/confoptions.c
+++ src/slon/confoptions.c
@@ -556,7 +556,7 @@
 			SLON_C_INT
 		},
 		&slon_log_level,
-		4,
+		2,
 		0,
 		4
 	},
Index: slon-tools.pm
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/altperl/slon-tools.pm,v
retrieving revision 1.28
retrieving revision 1.29
diff -Ltools/altperl/slon-tools.pm -Ltools/altperl/slon-tools.pm -u -w -r1.28 -r1.29
--- tools/altperl/slon-tools.pm
+++ tools/altperl/slon-tools.pm
@@ -133,7 +133,7 @@
   my ($dsn, $dbname) = ($DSN[$nodenum], $DBNAME[$nodenum]);
   $SYNC_CHECK_INTERVAL ||= 1000;
   system("mkdir -p $LOGDIR/slony1/node$nodenum");
-  my $cmd = "@@SLONBINDIR@@/slon -s $SYNC_CHECK_INTERVAL -d2 $CLUSTER_NAME '$dsn' 2>&1 ";
+  my $cmd = "@@SLONBINDIR@@/slon -s $SYNC_CHECK_INTERVAL -d$DEBUGLEVEL $CLUSTER_NAME '$dsn' 2>&1 ";
   if ($APACHE_ROTATOR) {
     $cmd .= "| $APACHE_ROTATOR \"$LOGDIR/slony1/node$nodenum/" .  $dbname . "_%Y-%m-%d_%H:%M:%S.log\" 10M &";
   } else {
Index: slon_tools.conf-sample
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/altperl/slon_tools.conf-sample,v
retrieving revision 1.7
retrieving revision 1.8
diff -Ltools/altperl/slon_tools.conf-sample -Ltools/altperl/slon_tools.conf-sample -u -w -r1.7 -r1.8
--- tools/altperl/slon_tools.conf-sample
+++ tools/altperl/slon_tools.conf-sample
@@ -37,6 +37,9 @@
     # Which node is the default master for all sets?
     $MASTERNODE = 1;
 
+    # Which debugging level to use?  [0-4]
+    $DEBUGLEVEL = 2;
+
     # Include add_node lines for each node in the cluster.  Be sure to
     # use host names that will resolve properly on all nodes
     # (i.e. only use 'localhost' if all nodes are on the same host).

From cvsuser  Tue Jan  2 12:17:34 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: updated mkslonconf.sh to reflect
	default debugging level #2
Message-ID: <20070102201734.A8C3B3FB66@gborg.postgresql.org>

Log Message:
-----------
updated mkslonconf.sh to reflect default debugging level #2

Modified Files:
--------------
    slony1-engine/tools:
        mkslonconf.sh (r1.2 -> r1.3)

-------------- next part --------------
Index: mkslonconf.sh
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/mkslonconf.sh,v
retrieving revision 1.2
retrieving revision 1.3
diff -Ltools/mkslonconf.sh -Ltools/mkslonconf.sh -u -w -r1.2 -r1.3
--- tools/mkslonconf.sh
+++ tools/mkslonconf.sh
@@ -36,7 +36,7 @@
 # Range: [0,100], default: 3
 #vac_frequency=3
 
-# Debug log level (higher value ==> more output).  Range: [0,4], default 4
+# Debug log level (higher value ==> more output).  Range: [0,4], default 2
 #log_level=2
 
 # Check for updates at least this often in milliseconds.

From cvsuser  Tue Jan  2 12:19:05 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Change config script to use "echo"
	rather than
Message-ID: <20070102201905.3A4983F9AD@gborg.postgresql.org>

Log Message:
-----------
Change config script to use "echo" rather than (non-existent) "err"
function

Modified Files:
--------------
    slony1-engine/tools:
        configure-replication.sh (r1.1 -> r1.2)

-------------- next part --------------
Index: configure-replication.sh
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/configure-replication.sh,v
retrieving revision 1.1
retrieving revision 1.2
diff -Ltools/configure-replication.sh -Ltools/configure-replication.sh -u -w -r1.1 -r1.2
--- tools/configure-replication.sh
+++ tools/configure-replication.sh
@@ -56,7 +56,7 @@
           eval bport=\$PORT${j}
           if [ -n "${bdb}" -a "${bhost}" -a "${buser}" -a "${bport}" ]; then
             echo "STORE PATH (SERVER=${i}, CLIENT=${j}, CONNINFO='dbname=${db} host=${host} user=${user} port=${port}');" >> $mktmp/store_paths.slonik          else
-            err 3 "No conninfo"
+            echo "STORE PATH (SERVER=${i}, CLIENT=${j}, CONNINFO='dbname=${db} host=${host} user=${user} port=${port}');" >> $mktmp/store_paths.slonik
           fi
         fi
         if [ ${j} -ge ${NUMNODES} ]; then
@@ -71,7 +71,7 @@
         i=$((${i} +1))
       fi
     else
-      err 3 "no DB"
+      echo "no DB"
     fi
   done
 }

From cvsuser  Tue Jan  2 15:34:35 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Add in make target for Splint for
	slonik...
Message-ID: <20070102233435.983843FB72@gborg.postgresql.org>

Log Message:
-----------
Add in make target for Splint for slonik...

<http://splint.org/> is a static C analysis tool that acts as an extended
version of Lint.

Modified Files:
--------------
    slony1-engine/src/slonik:
        Makefile (r1.24 -> r1.25)

-------------- next part --------------
Index: Makefile
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/src/slonik/Makefile,v
retrieving revision 1.24
retrieving revision 1.25
diff -Lsrc/slonik/Makefile -Lsrc/slonik/Makefile -u -w -r1.24 -r1.25
--- src/slonik/Makefile
+++ src/slonik/Makefile
@@ -66,6 +66,9 @@
 	@exit
 endif
 
+splint:
+	splint -I $(pgincludedir) -I $(pgincludeserverdir) +unixlib -preproc +skip-sys-headers $(wildcard *.c)
+
 clean distclean:
 	rm -f $(ALL) $(OBJS) $(PROG).core
 

From cvsuser  Tue Jan  2 15:34:48 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Add in make target for Splint for
	slon...
Message-ID: <20070102233448.3F2B33FEDE@gborg.postgresql.org>

Log Message:
-----------
Add in make target for Splint for slon... 

<http://splint.org/> is a static C analysis tool that acts as an extended
version of Lint.

Modified Files:
--------------
    slony1-engine/src/slon:
        Makefile (r1.41 -> r1.42)

-------------- next part --------------
Index: Makefile
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/src/slon/Makefile,v
retrieving revision 1.41
retrieving revision 1.42
diff -Lsrc/slon/Makefile -Lsrc/slon/Makefile -u -w -r1.41 -r1.42
--- src/slon/Makefile
+++ src/slon/Makefile
@@ -12,6 +12,8 @@
 SLFILEDESC="Slony replication engine"
 include $(slony_top_builddir)/Makefile.global
 
+SFILES=$(wildcard *.c)
+SFILES2=$(filter-out snmp_thread.c, $(SFILES))
 CC = $(PTHREAD_CC)
 
 override CFLAGS += $(PTHREAD_CFLAGS) -I$(slony_top_builddir) -I$(slony_top_builddir)/$(slony_subdir)
@@ -100,7 +102,8 @@
 installdirs:
 	$(mkinstalldirs) $(DESTDIR)$(slonbindir)
 
-
+splint:
+	splint -I $(pgincludedir) -I $(pgincludeserverdir) +unixlib -preproc +skip-sys-headers $(SFILES2)
 
 distdir: $(DISTFILES)
 	mkdir $(distdir)/$(subdir)

From cvsuser  Wed Jan  3 00:29:49 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By xfade: Define xxidout,
	xxid_snapshot_in and xxid_snapshot_out as
Message-ID: <20070103082949.33D503FB87@gborg.postgresql.org>

Log Message:
-----------
Define xxidout,xxid_snapshot_in and xxid_snapshot_out as STRICT. They don't check for NULL input, so they could crash the backend.

Tags:
----
REL_1_2_STABLE

Modified Files:
--------------
    slony1-engine/src/xxid:
        xxid.v74.sql (r1.1.2.2 -> r1.1.2.3)

-------------- next part --------------
Index: xxid.v74.sql
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/src/xxid/Attic/xxid.v74.sql,v
retrieving revision 1.1.2.2
retrieving revision 1.1.2.3
diff -Lsrc/xxid/xxid.v74.sql -Lsrc/xxid/xxid.v74.sql -u -w -r1.1.2.2 -r1.1.2.3
--- src/xxid/xxid.v74.sql
+++ src/xxid/xxid.v74.sql
@@ -17,7 +17,7 @@
 	LANGUAGE C STRICT;
 CREATE FUNCTION @NAMESPACE at ."xxidout"(@NAMESPACE at ."xxid") RETURNS cstring
 	AS '$libdir/xxid', '_Slony_I_xxidout'
-	LANGUAGE C;
+	LANGUAGE C STRICT;
 
 
 --
@@ -146,11 +146,11 @@
 CREATE FUNCTION @NAMESPACE at ."xxid_snapshot_in"(cstring)
 RETURNS @NAMESPACE at ."xxid_snapshot"
 	AS '$libdir/xxid', '_Slony_I_xxid_snapshot_in'
-	LANGUAGE C;
+	LANGUAGE C STRICT;
 CREATE FUNCTION @NAMESPACE at ."xxid_snapshot_out"(@NAMESPACE at ."xxid_snapshot")
 RETURNS cstring
 	AS '$libdir/xxid', '_Slony_I_xxid_snapshot_out'
-	LANGUAGE C;
+	LANGUAGE C STRICT;
 
 
 --

From cvsuser  Wed Jan  3 07:32:41 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Make 7.4 the earliest supported version
Message-ID: <20070103153241.BA8533F90E@gborg.postgresql.org>

Log Message:
-----------
Make 7.4 the earliest supported version

Modified Files:
--------------
    slony1-engine/src/xxid:
        Makefile (r1.23 -> r1.24)

Added Files:
-----------
    slony1-engine/src/xxid:
        xxid.v74.sql (r1.2)

-------------- next part --------------
Index: Makefile
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/src/xxid/Makefile,v
retrieving revision 1.23
retrieving revision 1.24
diff -Lsrc/xxid/Makefile -Lsrc/xxid/Makefile -u -w -r1.23 -r1.24
--- src/xxid/Makefile
+++ src/xxid/Makefile
@@ -17,10 +17,9 @@
 
 NAME		= xxid
 
-SQL_NAME73	= $(NAME).v73.sql
 SQL_NAME74	= $(NAME).v74.sql
 SQL_NAME80	= $(NAME).v80.sql
-SQL_NAMES	= $(SQL_NAME73) $(SQL_NAME74) $(SQL_NAME80)
+SQL_NAMES	= $(SQL_NAME74) $(SQL_NAME80)
 
 SO_OBJS		= xxid.o $(WIN32RES)
 
@@ -28,14 +27,11 @@
 	$(SO_NAME)			\
 	$(SQL_NAMES)		\
 
-DISTFILES = Makefile xxid.c xxid.v73.sql
+DISTFILES = Makefile xxid.c xxid.v74.sql
 
 all:	$(ALL)
 
-$(SQL_NAME74):	$(SQL_NAME73)
-	cp $< $@
-
-$(SQL_NAME80):	$(SQL_NAME73)
+$(SQL_NAME80):	$(SQL_NAME74)
 	cp $< $@
 
 $(SO_NAME):     $(SO_OBJS) $(POSTGRES_IMP)

From cvsuser  Wed Jan  3 07:36:52 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Change xxid Makefile rules so that
	xxid.v74.sql file
Message-ID: <20070103153652.CA5803F9AD@gborg.postgresql.org>

Log Message:
-----------
Change xxid Makefile rules so that xxid.v74.sql file doesn't get purged by 
"make clean", and to eliminate references to the v73 file, now obsolete.

Modified Files:
--------------
    slony1-engine/src/xxid:
        Makefile (r1.24 -> r1.25)

Removed Files:
-------------
    slony1-engine/src/xxid:
        xxid.v73.sql

-------------- next part --------------
--- src/xxid/xxid.v73.sql
+++ /dev/null
@@ -1,185 +0,0 @@
--- ----------
--- xxid.v73.sql.in
---
---	SQL script for loading the transaction ID compatible datatype 
---
---	Copyright (c) 2003-2004, PostgreSQL Global Development Group
---	Author: Jan Wieck, Afilias USA INC.
---
--- $Id: xxid.v73.sql,v 1.3 2005/05/11 22:00:07 cbbrowne Exp $
--- ----------
-
---
--- Type specific input and output functions
---
-CREATE FUNCTION @NAMESPACE at ."xxidin"(cstring) RETURNS @NAMESPACE at ."xxid"
-	AS '$libdir/xxid', '_Slony_I_xxidin'
-	LANGUAGE C;
-CREATE FUNCTION @NAMESPACE at ."xxidout"(@NAMESPACE at ."xxid") RETURNS cstring
-	AS '$libdir/xxid', '_Slony_I_xxidout'
-	LANGUAGE C;
-
-
---
--- The data type itself
---
-CREATE TYPE @NAMESPACE at ."xxid" (
-	INPUT = @NAMESPACE at ."xxidin",
-	OUTPUT = @NAMESPACE at ."xxidout",
-	EXTERNALLENGTH = 12,
-	INTERNALLENGTH = 4,
-	PASSEDBYVALUE,
-	ALIGNMENT = int4
-);
-
-
---
--- Since our xxid type has special cases for values 0-3, it
--- in fact IS xid, so allow implicit type casting to and from.
---
-CREATE CAST (xid AS @NAMESPACE at .xxid)
-	WITHOUT FUNCTION AS IMPLICIT;
-CREATE CAST (@NAMESPACE at .xxid AS xid)
-	WITHOUT FUNCTION AS IMPLICIT;
-
-
---
--- Comparision functions for the new datatype
---
-CREATE FUNCTION @NAMESPACE at ."xxideq"(@NAMESPACE at ."xxid", @NAMESPACE at ."xxid") RETURNS boolean
-	AS '$libdir/xxid', '_Slony_I_xxideq'
-	LANGUAGE C;
-CREATE FUNCTION @NAMESPACE at ."xxidne"(@NAMESPACE at ."xxid", @NAMESPACE at ."xxid") RETURNS boolean
-	AS '$libdir/xxid', '_Slony_I_xxidne'
-	LANGUAGE C;
-CREATE FUNCTION @NAMESPACE at ."xxidlt"(@NAMESPACE at ."xxid", @NAMESPACE at ."xxid") RETURNS boolean
-	AS '$libdir/xxid', '_Slony_I_xxidlt'
-	LANGUAGE C;
-CREATE FUNCTION @NAMESPACE at ."xxidle"(@NAMESPACE at ."xxid", @NAMESPACE at ."xxid") RETURNS boolean
-	AS '$libdir/xxid', '_Slony_I_xxidle'
-	LANGUAGE C;
-CREATE FUNCTION @NAMESPACE at ."xxidgt"(@NAMESPACE at ."xxid", @NAMESPACE at ."xxid") RETURNS boolean
-	AS '$libdir/xxid', '_Slony_I_xxidgt'
-	LANGUAGE C;
-CREATE FUNCTION @NAMESPACE at ."xxidge"(@NAMESPACE at ."xxid", @NAMESPACE at ."xxid") RETURNS boolean
-	AS '$libdir/xxid', '_Slony_I_xxidge'
-	LANGUAGE C;
-CREATE FUNCTION @NAMESPACE at ."btxxidcmp"(@NAMESPACE at ."xxid", @NAMESPACE at ."xxid") RETURNS int4
-	AS '$libdir/xxid', '_Slony_I_btxxidcmp'
-	LANGUAGE C;
-CREATE FUNCTION @NAMESPACE at .getCurrentXid() RETURNS @NAMESPACE at ."xxid"
-	AS '$libdir/xxid', '_Slony_I_getCurrentXid'
-	LANGUAGE C;
-CREATE FUNCTION @NAMESPACE at .getMinXid() RETURNS @NAMESPACE at ."xxid"
-	AS '$libdir/xxid', '_Slony_I_getMinXid'
-	LANGUAGE C;
-CREATE FUNCTION @NAMESPACE at .getMaxXid() RETURNS @NAMESPACE at ."xxid"
-	AS '$libdir/xxid', '_Slony_I_getMaxXid'
-	LANGUAGE C;
-
-
---
--- Operators on these comparision functions
---
-CREATE OPERATOR < (
-	PROCEDURE = @NAMESPACE at ."xxidlt",
-	LEFTARG = @NAMESPACE at ."xxid",
-	RIGHTARG = @NAMESPACE at ."xxid",
-	COMMUTATOR = >, NEGATOR = >=,
-	RESTRICT = scalarltsel, JOIN = scalarltjoinsel
-);
-CREATE OPERATOR = (
-	PROCEDURE = @NAMESPACE at ."xxideq",
-	LEFTARG = @NAMESPACE at ."xxid",
-	RIGHTARG = @NAMESPACE at ."xxid",
-	COMMUTATOR = =, NEGATOR = <>,
-	RESTRICT = eqsel, JOIN = eqjoinsel,
-	SORT1 = <, SORT2 = <
-);
-CREATE OPERATOR <> (
-	PROCEDURE = @NAMESPACE at ."xxidne",
-	LEFTARG = @NAMESPACE at ."xxid",
-	RIGHTARG = @NAMESPACE at ."xxid",
-	COMMUTATOR = <>, NEGATOR = =,
-	RESTRICT = neqsel, JOIN = neqjoinsel
-);
-CREATE OPERATOR > (
-	PROCEDURE = @NAMESPACE at ."xxidgt",
-	LEFTARG = @NAMESPACE at ."xxid",
-	RIGHTARG = @NAMESPACE at ."xxid",
-	COMMUTATOR = <, NEGATOR = <=,
-	RESTRICT = scalargtsel, JOIN = scalargtjoinsel
-);
-CREATE OPERATOR <= (
-	PROCEDURE = @NAMESPACE at ."xxidle",
-	LEFTARG = @NAMESPACE at ."xxid",
-	RIGHTARG = @NAMESPACE at ."xxid",
-	COMMUTATOR = >=, NEGATOR = >,
-	RESTRICT = scalarltsel, JOIN = scalarltjoinsel
-);
-CREATE OPERATOR >= (
-	PROCEDURE = @NAMESPACE at ."xxidge",
-	LEFTARG = @NAMESPACE at ."xxid",
-	RIGHTARG = @NAMESPACE at ."xxid",
-	COMMUTATOR = <=, NEGATOR = <,
-	RESTRICT = scalargtsel, JOIN = scalargtjoinsel
-);
-
-
---
--- Finally the default operator class so that we can use our
--- new data type in btree indexes.
---
-CREATE OPERATOR CLASS @NAMESPACE at ."xxid_ops"
-	DEFAULT FOR TYPE @NAMESPACE at ."xxid" USING btree AS
-	OPERATOR 1 <  (@NAMESPACE at ."xxid", @NAMESPACE at ."xxid"),
-	OPERATOR 2 <= (@NAMESPACE at ."xxid", @NAMESPACE at ."xxid"),
-	OPERATOR 3 =  (@NAMESPACE at ."xxid", @NAMESPACE at ."xxid"),
-	OPERATOR 4 >= (@NAMESPACE at ."xxid", @NAMESPACE at ."xxid"),
-	OPERATOR 5 >  (@NAMESPACE at ."xxid", @NAMESPACE at ."xxid"),
-	FUNCTION 1 @NAMESPACE at ."btxxidcmp" (@NAMESPACE at ."xxid", @NAMESPACE at ."xxid");
-
-
---
--- A special transaction snapshot data type for faster visibility checks
---
-CREATE FUNCTION @NAMESPACE at ."xxid_snapshot_in"(cstring)
-RETURNS @NAMESPACE at ."xxid_snapshot"
-	AS '$libdir/xxid', '_Slony_I_xxid_snapshot_in'
-	LANGUAGE C;
-CREATE FUNCTION @NAMESPACE at ."xxid_snapshot_out"(@NAMESPACE at ."xxid_snapshot")
-RETURNS cstring
-	AS '$libdir/xxid', '_Slony_I_xxid_snapshot_out'
-	LANGUAGE C;
-
-
---
--- The data type itself
---
-CREATE TYPE @NAMESPACE at ."xxid_snapshot" (
-	INPUT = @NAMESPACE at ."xxid_snapshot_in",
-	OUTPUT = @NAMESPACE at ."xxid_snapshot_out",
-	INTERNALLENGTH = variable,
-	ALIGNMENT = int4
-);
-
-
---
--- Special comparision functions used by the remote worker
--- for sync chunk selection
---
-CREATE FUNCTION @NAMESPACE at ."xxid_lt_snapshot"(
-		@NAMESPACE at ."xxid",
-		@NAMESPACE at ."xxid_snapshot")
-RETURNS boolean
-	AS '$libdir/xxid', '_Slony_I_xxid_lt_snapshot'
-	LANGUAGE C;
-
-CREATE FUNCTION @NAMESPACE at ."xxid_ge_snapshot"(
-		@NAMESPACE at ."xxid",
-		@NAMESPACE at ."xxid_snapshot")
-RETURNS boolean
-	AS '$libdir/xxid', '_Slony_I_xxid_ge_snapshot'
-	LANGUAGE C;
-
-
Index: Makefile
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/src/xxid/Makefile,v
retrieving revision 1.24
retrieving revision 1.25
diff -Lsrc/xxid/Makefile -Lsrc/xxid/Makefile -u -w -r1.24 -r1.25
--- src/xxid/Makefile
+++ src/xxid/Makefile
@@ -20,6 +20,7 @@
 SQL_NAME74	= $(NAME).v74.sql
 SQL_NAME80	= $(NAME).v80.sql
 SQL_NAMES	= $(SQL_NAME74) $(SQL_NAME80)
+GENSQLNAMES = $(filter-out $(SQL_NAME74), $(SQL_NAMES))
 
 SO_OBJS		= xxid.o $(WIN32RES)
 
@@ -38,7 +39,7 @@
 
 clean distclean maintainer-clean:
 	rm -f $(SO_NAME) $(SO_OBJS)
-	rm -f $(SQL_NAMES)
+	rm -f $(GENSQLNAMES)
 
 install: all installdirs
 	$(INSTALL_SCRIPT) $(SO_NAME) $(DESTDIR)$(pgpkglibdir)

From cvsuser  Wed Jan  3 07:49:42 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By xfade: Define xxidin, xxidout,
	xxid_snapshot_in and xxid_snapshot_out
Message-ID: <20070103154942.35A353FB6A@gborg.postgresql.org>

Log Message:
-----------
Define xxidin,xxidout,xxid_snapshot_in and xxid_snapshot_out as STRICT. They don't check for NULL input, so they could crash the backend.

Modified Files:
--------------
    slony1-engine/src/xxid:
        xxid.v74.sql (r1.2 -> r1.3)

-------------- next part --------------
Index: xxid.v74.sql
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/src/xxid/xxid.v74.sql,v
retrieving revision 1.2
retrieving revision 1.3
diff -Lsrc/xxid/xxid.v74.sql -Lsrc/xxid/xxid.v74.sql -u -w -r1.2 -r1.3
--- src/xxid/xxid.v74.sql
+++ src/xxid/xxid.v74.sql
@@ -1,5 +1,5 @@
 -- ----------
--- xxid.v73.sql.in
+-- xxid.v74.sql.in
 --
 --	SQL script for loading the transaction ID compatible datatype 
 --
@@ -14,10 +14,10 @@
 --
 CREATE FUNCTION @NAMESPACE at ."xxidin"(cstring) RETURNS @NAMESPACE at ."xxid"
 	AS '$libdir/xxid', '_Slony_I_xxidin'
-	LANGUAGE C;
+	LANGUAGE C STRICT;
 CREATE FUNCTION @NAMESPACE at ."xxidout"(@NAMESPACE at ."xxid") RETURNS cstring
 	AS '$libdir/xxid', '_Slony_I_xxidout'
-	LANGUAGE C;
+	LANGUAGE C STRICT;
 
 
 --
@@ -146,11 +146,11 @@
 CREATE FUNCTION @NAMESPACE at ."xxid_snapshot_in"(cstring)
 RETURNS @NAMESPACE at ."xxid_snapshot"
 	AS '$libdir/xxid', '_Slony_I_xxid_snapshot_in'
-	LANGUAGE C;
+	LANGUAGE C STRICT;
 CREATE FUNCTION @NAMESPACE at ."xxid_snapshot_out"(@NAMESPACE at ."xxid_snapshot")
 RETURNS cstring
 	AS '$libdir/xxid', '_Slony_I_xxid_snapshot_out'
-	LANGUAGE C;
+	LANGUAGE C STRICT;
 
 
 --

From cvsuser  Thu Jan  4 04:11:05 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By devrim: - Add docs package (It should be added
	before but...)
Message-ID: <20070104121105.2B2A43F9AC@gborg.postgresql.org>

Log Message:
-----------
- Add docs package (It should be added before but...)

Tags:
----
REL_1_2_STABLE

Modified Files:
--------------
    slony1-engine:
        postgresql-slony1-engine.spec.in (r1.31.2.5 -> r1.31.2.6)

-------------- next part --------------
Index: postgresql-slony1-engine.spec.in
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/postgresql-slony1-engine.spec.in,v
retrieving revision 1.31.2.5
retrieving revision 1.31.2.6
diff -Lpostgresql-slony1-engine.spec.in -Lpostgresql-slony1-engine.spec.in -u -w -r1.31.2.5 -r1.31.2.6
--- postgresql-slony1-engine.spec.in
+++ postgresql-slony1-engine.spec.in
@@ -109,9 +109,6 @@
 %files
 %defattr(-,root,root,-)
 %doc COPYRIGHT UPGRADING HISTORY-1.1 INSTALL SAMPLE RELEASE-1.2.1
-%if %docs
-%doc doc/adminguide  doc/concept  doc/howto  doc/implementation  doc/support
-%endif
 %{_bindir}/*
 %{_libdir}/pgsql/slony1_funcs.so
 %{_libdir}/pgsql/xxid.so
@@ -122,10 +119,19 @@
 %config(noreplace) %{_sysconfdir}/slon_tools.conf
 %endif
 
+%if %docs
+%files docs
+%defattr(-,root,root,-)
+%doc doc/adminguide  doc/concept  doc/howto  doc/implementation  doc/support
+%endif
+
 %changelog
+* Thu Jan 4 2007 Devrim Gunduz <devrim at CommandPrompt.com>
+- Add docs package (It should be added before but...)
+
 * Wed Nov 8 2006 Devrim Gunduz <devrim at CommandPrompt.com>
-- On 64-bit boxes, both 32 and 64 bit -devel packages may be installed. Fix version check
-script
+- On 64-bit boxes, both 32 and 64 bit -devel packages may be installed. 
+  Fix version check script
 - Revert tar name patch
 - Macros cannot be used in various parts of the spec file. Revert that commit
 - Spec file cleanup

From cvsuser  Fri Jan  5 11:11:29 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Describe use of "altperl" scripts to
	drop a table from
Message-ID: <20070105191129.8B5B73FB59@gborg.postgresql.org>

Log Message:
-----------
Describe use of "altperl" scripts to drop a table from replication in the
section on "dropping things."  Per Mark Stosberg.

Modified Files:
--------------
    slony1-engine/doc/adminguide:
        adminscripts.sgml (r1.43 -> r1.44)
        dropthings.sgml (r1.16 -> r1.17)

-------------- next part --------------
Index: adminscripts.sgml
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/doc/adminguide/adminscripts.sgml,v
retrieving revision 1.43
retrieving revision 1.44
diff -Ldoc/adminguide/adminscripts.sgml -Ldoc/adminguide/adminscripts.sgml -u -w -r1.43 -r1.44
--- doc/adminguide/adminscripts.sgml
+++ doc/adminguide/adminscripts.sgml
@@ -165,7 +165,7 @@
 &slony1; cluster.</para>
 </sect3>
 
-<sect3><title>slonik_drop_table</title>
+<sect3 id="slonik-drop-table"><title>slonik_drop_table</title>
 
 <para>Generates Slonik script to drop a table from replication.
 Requires, as input, the ID number of the table (available from table
Index: dropthings.sgml
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/doc/adminguide/dropthings.sgml,v
retrieving revision 1.16
retrieving revision 1.17
diff -Ldoc/adminguide/dropthings.sgml -Ldoc/adminguide/dropthings.sgml -u -w -r1.16 -r1.17
--- doc/adminguide/dropthings.sgml
+++ doc/adminguide/dropthings.sgml
@@ -82,9 +82,23 @@
 
 </sect2>
 <sect2><title> Dropping A Table From Replication</title>
-
 <indexterm><primary>dropping a table from replication</primary></indexterm>
 
+<sect3><title> Using the altperl tools </title>
+
+<para>
+If the <link linkend="altperl"> altperl </link> utilities are
+installed, you can use the <link linkend="slonik-drop-table">
+slonik_drop_table </link> helper script to drop a table from
+replication. Simply run <command>slonik_drop_table</command> with no
+arguments to review the correct usage of the script. After dropping
+the table, you should also remove it from
+<filename>slon_tools.conf</filename>.
+</para>
+
+</sect3>
+<sect3><title> Using Direct slonik commands </title>
+
 <para>In &slony1; 1.0.5 and above, there is a Slonik command <xref
 linkend="stmtsetdroptable"> that allows dropping a single table from
 replication without forcing the user to drop the entire replication
@@ -115,6 +129,7 @@
 three queries using <xref linkend="stmtddlscript"> could do that; see
 <xref linkend="ddlchanges"> for more details.  Also possible would be
 to connect to each database and submit the queries by hand.</para>
+</sect3>
 </sect2>
 
 <sect2><title>Dropping A Sequence From Replication</title>

From cvsuser  Fri Jan  5 11:11:44 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Describe use of "altperl" scripts to
	drop a table from
Message-ID: <20070105191144.EA1F93FEEF@gborg.postgresql.org>

Log Message:
-----------
Describe use of "altperl" scripts to drop a table from replication in the
section on "dropping things."  Per Mark Stosberg.

Tags:
----
REL_1_2_STABLE

Modified Files:
--------------
    slony1-engine/doc/adminguide:
        adminscripts.sgml (r1.40.2.5 -> r1.40.2.6)
        dropthings.sgml (r1.16 -> r1.16.2.1)

-------------- next part --------------
Index: adminscripts.sgml
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/doc/adminguide/adminscripts.sgml,v
retrieving revision 1.40.2.5
retrieving revision 1.40.2.6
diff -Ldoc/adminguide/adminscripts.sgml -Ldoc/adminguide/adminscripts.sgml -u -w -r1.40.2.5 -r1.40.2.6
--- doc/adminguide/adminscripts.sgml
+++ doc/adminguide/adminscripts.sgml
@@ -165,7 +165,7 @@
 &slony1; cluster.</para>
 </sect3>
 
-<sect3><title>slonik_drop_table</title>
+<sect3 id="slonik-drop-table"><title>slonik_drop_table</title>
 
 <para>Generates Slonik script to drop a table from replication.
 Requires, as input, the ID number of the table (available from table
@@ -535,8 +535,6 @@
 not correspond, of course, to any database you actually want to
 use...</para>
 
-</sect3>
-
 <sect3><title>Node-Specific Values</title>
 
 <para>For each node, there are also four environment variables; for node 1: </para>
Index: dropthings.sgml
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/doc/adminguide/dropthings.sgml,v
retrieving revision 1.16
retrieving revision 1.16.2.1
diff -Ldoc/adminguide/dropthings.sgml -Ldoc/adminguide/dropthings.sgml -u -w -r1.16 -r1.16.2.1
--- doc/adminguide/dropthings.sgml
+++ doc/adminguide/dropthings.sgml
@@ -82,9 +82,23 @@
 
 </sect2>
 <sect2><title> Dropping A Table From Replication</title>
-
 <indexterm><primary>dropping a table from replication</primary></indexterm>
 
+<sect3><title> Using the altperl tools </title>
+
+<para>
+If the <link linkend="altperl"> altperl </link> utilities are
+installed, you can use the <link linkend="slonik-drop-table">
+slonik_drop_table </link> helper script to drop a table from
+replication. Simply run <command>slonik_drop_table</command> with no
+arguments to review the correct usage of the script. After dropping
+the table, you should also remove it from
+<filename>slon_tools.conf</filename>.
+</para>
+
+</sect3>
+<sect3><title> Using Direct slonik commands </title>
+
 <para>In &slony1; 1.0.5 and above, there is a Slonik command <xref
 linkend="stmtsetdroptable"> that allows dropping a single table from
 replication without forcing the user to drop the entire replication
@@ -115,6 +129,7 @@
 three queries using <xref linkend="stmtddlscript"> could do that; see
 <xref linkend="ddlchanges"> for more details.  Also possible would be
 to connect to each database and submit the queries by hand.</para>
+</sect3>
 </sect2>
 
 <sect2><title>Dropping A Sequence From Replication</title>

From cvsuser  Fri Jan  5 11:28:48 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By devrim: Fix sgml error
Message-ID: <20070105192848.5C8F83FB6A@gborg.postgresql.org>

Log Message:
-----------
Fix sgml error

Tags:
----
REL_1_2_STABLE

Modified Files:
--------------
    slony1-engine/doc/adminguide:
        adminscripts.sgml (r1.40.2.6 -> r1.40.2.7)

-------------- next part --------------
Index: adminscripts.sgml
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/doc/adminguide/adminscripts.sgml,v
retrieving revision 1.40.2.6
retrieving revision 1.40.2.7
diff -Ldoc/adminguide/adminscripts.sgml -Ldoc/adminguide/adminscripts.sgml -u -w -r1.40.2.6 -r1.40.2.7
--- doc/adminguide/adminscripts.sgml
+++ doc/adminguide/adminscripts.sgml
@@ -534,7 +534,7 @@
 environment variables, you will get a set of slonik scripts.  They may
 not correspond, of course, to any database you actually want to
 use...</para>
-
+</sect3>
 <sect3><title>Node-Specific Values</title>
 
 <para>For each node, there are also four environment variables; for node 1: </para>

From cvsuser  Fri Jan  5 11:32:29 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By devrim: Fix sgml errors
Message-ID: <20070105193229.D24FF3FB72@gborg.postgresql.org>

Log Message:
-----------
Fix sgml errors

Modified Files:
--------------
    slony1-engine/doc/adminguide:
        adminscripts.sgml (r1.44 -> r1.45)
        releasechecklist.sgml (r1.7 -> r1.8)

-------------- next part --------------
Index: adminscripts.sgml
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/doc/adminguide/adminscripts.sgml,v
retrieving revision 1.44
retrieving revision 1.45
diff -Ldoc/adminguide/adminscripts.sgml -Ldoc/adminguide/adminscripts.sgml -u -w -r1.44 -r1.45
--- doc/adminguide/adminscripts.sgml
+++ doc/adminguide/adminscripts.sgml
@@ -534,6 +534,7 @@
 environment variables, you will get a set of slonik scripts.  They may
 not correspond, of course, to any database you actually want to
 use...</para>
+</sect3>
 
 <sect3><title>Node-Specific Values</title>
 
Index: releasechecklist.sgml
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/doc/adminguide/releasechecklist.sgml,v
retrieving revision 1.7
retrieving revision 1.8
diff -Ldoc/adminguide/releasechecklist.sgml -Ldoc/adminguide/releasechecklist.sgml -u -w -r1.7 -r1.8
--- doc/adminguide/releasechecklist.sgml
+++ doc/adminguide/releasechecklist.sgml
@@ -8,28 +8,23 @@
 
   <listitem><para>Positive build reports for each supported platform -
   although it is arguably less necessary for a comprehensive list if
-  we are releasing a minor upgrade
+  we are releasing a minor upgrade </para></listitem> 
 
-  </para></listitem> 
-
-<listitem><para>Some kind of Standard Test Plan 
-
-  </para></listitem> 
-<listitem><para>Binary RPM packages 
+<listitem><para>Some kind of Standard Test Plan</para></listitem> 
+<listitem><para>Binary RPM packages</para></listitem> 
 
-  </para></listitem> 
-
-<listitem><para>If the release is a <quote>.0</quote> one, we need to
+<listitem>
+ <para>If the release is a <quote>.0</quote> one, we need to
 open a new STABLE branch</para>
 
-<para> <command> cvs tag -b REL_1_2_STABLE</command>
-
-<listitem><para>Tag the with the release ID. For version 1.1.2, this
+ <para> <command> cvs tag -b REL_1_2_STABLE</command></para>
+</listitem>
+<listitem>
+ <para>Tag the with the release ID. For version 1.1.2, this
 would be <envar>REL_1_1_2 </envar></para>
 
-<para> <command> cvs tag REL_1_1_2 </command>
-
-</para></listitem> 
+ <para> <command> cvs tag REL_1_1_2 </command></para>
+</listitem> 
 
 <listitem><para>Check out a copy via <command>cvs export -rREL_1_1_2 </command>
 
@@ -48,16 +43,15 @@
 <para> This does a bunch of consistency checks to make sure that
 various files that are supposed to contain version numbers contain
 consistent values.</para> 
+</listitem>
+<listitem><para>For instance, configure should contain, for release 1.1.2:</para></listitem>
 
-<itemizedlist>
-<listitem><para>For instance, configure should contain, for release 1.1.2:</para>
-<itemizedlist>
 <listitem><para>PACKAGE_VERSION=REL_1_1_2</para></listitem>
 
 <listitem><para>PACKAGE_STRING=postgresql-slony1-engine REL_1_1_2</para></listitem>
 
-</itemizedlist></listitem>
-
+</itemizedlist>
+<itemizedlist>
 <listitem><para> <filename> config.h.in </filename> needs to contain the version
 number in two forms; the definitions for
 <envar>SLONY_I_VERSION_STRING</envar> and
@@ -71,20 +65,12 @@
 <function>slonyVersionPatchlevel()</function>.  These need to be
 assigned <quote>by hand</quote> at this point.</para> </listitem>
 
-<para> It sure would be nice if more of these could be assigned
+<listitem><para> It sure would be nice if more of these could be assigned
 automatically, somehow.</para>
 
 <para><emphasis>Don't</emphasis> commit the new
 <filename>configure</filename>; we shouldn't be tracking this in CVS.
-</para>
-
-<listitem><para> One test that seems inherently troublesome to
-automate is the set of version numbers listed in upgradeSchema() in
-src/backend/slony1_funcs.sql. </para>
-
-<para> As new versions are released, the lists of version numbers will
-need to get changed; this does not seem amenable to much
-automation. </para> </listitem>
+</para></listitem>
 
 <listitem><para>make sure that the generated files from .l and .y are
 created, for example <filename>slony/conf-file.[ch]</filename> </para>

From cvsuser  Fri Jan  5 12:50:09 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Release note updates
Message-ID: <20070105205009.4253E3FAFA@gborg.postgresql.org>

Log Message:
-----------
Release note updates

Tags:
----
REL_1_2_STABLE

Modified Files:
--------------
    slony1-engine:
        RELEASE-1.2.2 (r1.1.2.3 -> r1.1.2.4)

Added Files:
-----------
    slony1-engine:
        RELEASE-1.2.5 (r1.1.2.1)

-------------- next part --------------
Index: RELEASE-1.2.2
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/Attic/RELEASE-1.2.2,v
retrieving revision 1.1.2.3
retrieving revision 1.1.2.4
diff -LRELEASE-1.2.2 -LRELEASE-1.2.2 -u -w -r1.1.2.3 -r1.1.2.4
--- RELEASE-1.2.2
+++ RELEASE-1.2.2
@@ -59,3 +59,9 @@
 
 - Fixes to parameter handling and interpreter name for
   test_slony_state*.pl scripts
+
+- There was an error condition where if the final line of a slon.conf
+  file did not end with a \n, then:
+   a) A comment on that line would be treated as a syntax error
+   b) A value set on that line would be ignored
+  Fixed.
--- /dev/null
+++ RELEASE-1.2.5
@@ -0,0 +1,10 @@
+$Id: RELEASE-1.2.5,v 1.1.2.1 2007/01/05 20:50:08 cbbrowne Exp $
+
+Release 1.2.5 of Slony-I has the following bug fixes over 1.2.2:
+
+- Fixed issue with xxid C functions - these functions need to be
+  defined STRICT so that NULL values don't cause the functions to
+  barf.  This has been causing users of PostgreSQL 8.2 to see
+  postmasters falling over.
+
+- Several improvements to internal documentation of altperl scripts

From cvsuser  Mon Jan  8 09:31:42 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Change version to 1.2.6
Message-ID: <20070108173142.857493FB43@gborg.postgresql.org>

Log Message:
-----------
Change version to 1.2.6

Tags:
----
REL_1_2_STABLE

Modified Files:
--------------
    slony1-engine:
        config.h.in (r1.17.2.2 -> r1.17.2.3)
    slony1-engine/tools:
        release_checklist.sh (r1.1.2.2 -> r1.1.2.3)
    slony1-engine/src/backend:
        slony1_funcs.sql (r1.98.2.7 -> r1.98.2.8)

Added Files:
-----------
    slony1-engine:
        RELEASE-1.2.6 (r1.1.2.1)

-------------- next part --------------
Index: config.h.in
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/config.h.in,v
retrieving revision 1.17.2.2
retrieving revision 1.17.2.3
diff -Lconfig.h.in -Lconfig.h.in -u -w -r1.17.2.2 -r1.17.2.3
--- config.h.in
+++ config.h.in
@@ -12,8 +12,8 @@
 #ifndef	SLONY_I_CONFIG_H
 #define SLONY_I_CONFIG_H
 
-#define SLONY_I_VERSION_STRING	"1.2.2"
-#define SLONY_I_VERSION_STRING_DEC 1,2,2
+#define SLONY_I_VERSION_STRING	"1.2.6"
+#define SLONY_I_VERSION_STRING_DEC 1,2,6
 
 #ifndef PG_VERSION_MAJOR
 #define PG_VERSION_MAJOR 0
--- /dev/null
+++ RELEASE-1.2.6
@@ -0,0 +1,3 @@
+$Id: RELEASE-1.2.6,v 1.1.2.1 2007/01/08 17:31:40 cbbrowne Exp $
+
+Release 1.2.6 fixes version numbers.
\ No newline at end of file
Index: release_checklist.sh
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/release_checklist.sh,v
retrieving revision 1.1.2.2
retrieving revision 1.1.2.3
diff -Ltools/release_checklist.sh -Ltools/release_checklist.sh -u -w -r1.1.2.2 -r1.1.2.3
--- tools/release_checklist.sh
+++ tools/release_checklist.sh
@@ -12,7 +12,7 @@
 MINOR=`echo $VERSTRING | cut -d '.' -f 2`
 PATCHLEVEL=`echo $VERSTRING | cut -d '.' -f 3`
 
-echo "Slony-I version: ${VERSTRING} - Major=${MAJOR} Minor=${MINOR} Patchlevel=${PATCHLEVEL}"
+echo "Slony-I version: ${VERSTRING} - Major=${MAJOR} Minor=${MINOR} Patchlevel=${PATCHLEVEL} per config.h.in"
 
 VERCOMMA="${MAJOR},${MINOR},${PATCHLEVEL}"
 if [[ `egrep "#define SLONY_I_VERSION_STRING_DEC ${VERCOMMA}\$" config.h.in` ]]; then
@@ -27,12 +27,12 @@
 if [[ `egrep "^PACKAGE_VERSION=${VERUNDERSCORE=}\$" configure` ]]; then
    echo "configure PACKAGE_VERSION matches ${VERUNDERSCORE}"
 else
-   echo "ERROR: configure PACKAGE_VERSION does not match ${VERUNDERSCORE}"
+   echo "ERROR: PACKAGE_VERSION in configure does not match ${VERUNDERSCORE}"
    egrep "PACKAGE_VERSION\=" configure
 fi
 
 if [[ `egrep "^PACKAGE_STRING=postgresql-slony1-engine ${VERUNDERSCORE=}\$" configure` ]]; then
-   echo "configure PACKAGE_STRING matches ${VERUNDERSCORE}"
+   echo "PACKAGE_STRING in configure matches ${VERUNDERSCORE}"
 else
    echo "ERROR: configure PACKAGE_STRING does not match ${VERUNDERSCORE}"
    egrep "PACKAGE_STRING\=" configure
Index: slony1_funcs.sql
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/src/backend/slony1_funcs.sql,v
retrieving revision 1.98.2.7
retrieving revision 1.98.2.8
diff -Lsrc/backend/slony1_funcs.sql -Lsrc/backend/slony1_funcs.sql -u -w -r1.98.2.7 -r1.98.2.8
--- src/backend/slony1_funcs.sql
+++ src/backend/slony1_funcs.sql
@@ -430,7 +430,7 @@
 returns int4
 as '
 begin
-	return 2;
+	return 6;
 end;
 ' language plpgsql;
 comment on function @NAMESPACE at .slonyVersionPatchlevel () is 

From cvsuser  Mon Jan  8 09:41:57 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Fix up version tests
Message-ID: <20070108174157.0CB6B3FB1C@gborg.postgresql.org>

Log Message:
-----------
Fix up version tests

Tags:
----
REL_1_2_STABLE

Modified Files:
--------------
    slony1-engine/tools:
        release_checklist.sh (r1.1.2.3 -> r1.1.2.4)

-------------- next part --------------
Index: release_checklist.sh
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/release_checklist.sh,v
retrieving revision 1.1.2.3
retrieving revision 1.1.2.4
diff -Ltools/release_checklist.sh -Ltools/release_checklist.sh -u -w -r1.1.2.3 -r1.1.2.4
--- tools/release_checklist.sh
+++ tools/release_checklist.sh
@@ -7,14 +7,16 @@
 
 echo "Slony-I Release Checklist"
 
-VERSTRING=`egrep 'SLONY_I_VERSION_STRING.*"[0-9]+\.[0-9]+\.[0-9]+"' config.h.in | cut -d'"' -f 2`
-MAJOR=`echo $VERSTRING | cut -d '.' -f 1`
-MINOR=`echo $VERSTRING | cut -d '.' -f 2`
-PATCHLEVEL=`echo $VERSTRING | cut -d '.' -f 3`
+echo "pulling version information from config.h.in"
+VERDOTTED=`egrep 'SLONY_I_VERSION_STRING.*"[0-9]+\.[0-9]+\.[0-9]+"' config.h.in | cut -d'"' -f 2`
+MAJOR=`echo $VERDOTTED | cut -d '.' -f 1`
+MINOR=`echo $VERDOTTED | cut -d '.' -f 2`
+PATCHLEVEL=`echo $VERDOTTED | cut -d '.' -f 3`
 
-echo "Slony-I version: ${VERSTRING} - Major=${MAJOR} Minor=${MINOR} Patchlevel=${PATCHLEVEL} per config.h.in"
+echo "Slony-I version: ${VERDOTTED} - Major=${MAJOR} Minor=${MINOR} Patchlevel=${PATCHLEVEL} per config.h.in"
 
 VERCOMMA="${MAJOR},${MINOR},${PATCHLEVEL}"
+VERUNDERSCORE="${MAJOR}_${MINOR}_${PATCHLEVEL}"
 if [[ `egrep "#define SLONY_I_VERSION_STRING_DEC ${VERCOMMA}\$" config.h.in` ]]; then
    echo "SLONY_I_VERSION_STRING_DEC matches"
 else
@@ -23,18 +25,17 @@
 fi
 
 echo "Verifying configure..."
-VERUNDERSCORE="${MAJOR}_${MINOR}_${PATCHLEVEL}"
-if [[ `egrep "^PACKAGE_VERSION=${VERUNDERSCORE=}\$" configure` ]]; then
-   echo "configure PACKAGE_VERSION matches ${VERUNDERSCORE}"
+if [[ `egrep "^PACKAGE_VERSION='${VERDOTTED}'\$" configure` ]]; then
+   echo "configure PACKAGE_VERSION matches ${VERDOTTED}"
 else
-   echo "ERROR: PACKAGE_VERSION in configure does not match ${VERUNDERSCORE}"
+   echo "ERROR: PACKAGE_VERSION in configure does not match ${VERDOTTED}"
    egrep "PACKAGE_VERSION\=" configure
 fi
 
-if [[ `egrep "^PACKAGE_STRING=postgresql-slony1-engine ${VERUNDERSCORE=}\$" configure` ]]; then
-   echo "PACKAGE_STRING in configure matches ${VERUNDERSCORE}"
+if [[ `egrep "^PACKAGE_STRING='postgresql-slony1-engine ${VERDOTTED}'\$" configure` ]]; then
+   echo "PACKAGE_STRING in configure matches ${VERDOTTED}"
 else
-   echo "ERROR: configure PACKAGE_STRING does not match ${VERUNDERSCORE}"
+   echo "ERROR: configure PACKAGE_STRING does not match ${VERDOTTED}"
    egrep "PACKAGE_STRING\=" configure
 fi
 
@@ -51,11 +52,11 @@
 
 STOREDPROCVERS=`awk  -f tools/awk-for-stored-proc-vers.awk  src/backend/slony1_funcs.sql`
 
-if [[ x"$STOREDPROCVERS" = x"$VERSTRING" ]]; then
+if [[ x"$STOREDPROCVERS" = x"$VERDOTTED" ]]; then
    OK=1
-   echo "Stored proc version numbers match ${VERSTRING}"
+   echo "Stored proc version numbers match ${VERDOTTED}"
 else
-   echo "ERROR: Stored proc versions in src/backend/slony1_funcs.sql indicates version [${STOREDPROCVERS}] (versus [${VERSTRING}])"
+   echo "ERROR: Stored proc versions in src/backend/slony1_funcs.sql indicates version [${STOREDPROCVERS}] (versus [${VERDOTTED}])"
 fi
 
 

From cvsuser  Mon Jan  8 09:42:17 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Fix up version checks
Message-ID: <20070108174217.B29223FB1C@gborg.postgresql.org>

Log Message:
-----------
Fix up version checks

Modified Files:
--------------
    slony1-engine/tools:
        release_checklist.sh (r1.2 -> r1.3)

-------------- next part --------------
Index: release_checklist.sh
===================================================================
RCS file: /usr/local/cvsroot/slony1/slony1-engine/tools/release_checklist.sh,v
retrieving revision 1.2
retrieving revision 1.3
diff -Ltools/release_checklist.sh -Ltools/release_checklist.sh -u -w -r1.2 -r1.3
--- tools/release_checklist.sh
+++ tools/release_checklist.sh
@@ -7,14 +7,16 @@
 
 echo "Slony-I Release Checklist"
 
-VERSTRING=`egrep 'SLONY_I_VERSION_STRING.*"[0-9]+\.[0-9]+\.[0-9]+"' config.h.in | cut -d'"' -f 2`
-MAJOR=`echo $VERSTRING | cut -d '.' -f 1`
-MINOR=`echo $VERSTRING | cut -d '.' -f 2`
-PATCHLEVEL=`echo $VERSTRING | cut -d '.' -f 3`
+echo "pulling version information from config.h.in"
+VERDOTTED=`egrep 'SLONY_I_VERSION_STRING.*"[0-9]+\.[0-9]+\.[0-9]+"' config.h.in | cut -d'"' -f 2`
+MAJOR=`echo $VERDOTTED | cut -d '.' -f 1`
+MINOR=`echo $VERDOTTED | cut -d '.' -f 2`
+PATCHLEVEL=`echo $VERDOTTED | cut -d '.' -f 3`
 
-echo "Slony-I version: ${VERSTRING} - Major=${MAJOR} Minor=${MINOR} Patchlevel=${PATCHLEVEL}"
+echo "Slony-I version: ${VERDOTTED} - Major=${MAJOR} Minor=${MINOR} Patchlevel=${PATCHLEVEL} per config.h.in"
 
 VERCOMMA="${MAJOR},${MINOR},${PATCHLEVEL}"
+VERUNDERSCORE="${MAJOR}_${MINOR}_${PATCHLEVEL}"
 if [[ `egrep "#define SLONY_I_VERSION_STRING_DEC ${VERCOMMA}\$" config.h.in` ]]; then
    echo "SLONY_I_VERSION_STRING_DEC matches"
 else
@@ -23,18 +25,17 @@
 fi
 
 echo "Verifying configure..."
-VERUNDERSCORE="${MAJOR}_${MINOR}_${PATCHLEVEL}"
-if [[ `egrep "^PACKAGE_VERSION=${VERUNDERSCORE=}\$" configure` ]]; then
-   echo "configure PACKAGE_VERSION matches ${VERUNDERSCORE}"
+if [[ `egrep "^PACKAGE_VERSION='${VERDOTTED}'\$" configure` ]]; then
+   echo "configure PACKAGE_VERSION matches ${VERDOTTED}"
 else
-   echo "ERROR: configure PACKAGE_VERSION does not match ${VERUNDERSCORE}"
+   echo "ERROR: PACKAGE_VERSION in configure does not match ${VERDOTTED}"
    egrep "PACKAGE_VERSION\=" configure
 fi
 
-if [[ `egrep "^PACKAGE_STRING=postgresql-slony1-engine ${VERUNDERSCORE=}\$" configure` ]]; then
-   echo "configure PACKAGE_STRING matches ${VERUNDERSCORE}"
+if [[ `egrep "^PACKAGE_STRING='postgresql-slony1-engine ${VERDOTTED}'\$" configure` ]]; then
+   echo "PACKAGE_STRING in configure matches ${VERDOTTED}"
 else
-   echo "ERROR: configure PACKAGE_STRING does not match ${VERUNDERSCORE}"
+   echo "ERROR: configure PACKAGE_STRING does not match ${VERDOTTED}"
    egrep "PACKAGE_STRING\=" configure
 fi
 
@@ -51,11 +52,11 @@
 
 STOREDPROCVERS=`awk  -f tools/awk-for-stored-proc-vers.awk  src/backend/slony1_funcs.sql`
 
-if [[ x"$STOREDPROCVERS" = x"$VERSTRING" ]]; then
+if [[ x"$STOREDPROCVERS" = x"$VERDOTTED" ]]; then
    OK=1
-   echo "Stored proc version numbers match ${VERSTRING}"
+   echo "Stored proc version numbers match ${VERDOTTED}"
 else
-   echo "ERROR: Stored proc versions in src/backend/slony1_funcs.sql indicates version [${STOREDPROCVERS}] (versus [${VERSTRING}])"
+   echo "ERROR: Stored proc versions in src/backend/slony1_funcs.sql indicates version [${STOREDPROCVERS}] (versus [${VERDOTTED}])"
 fi
 
 

From cvsuser  Mon Jan 15 13:36:44 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: New Directory
Message-ID: <20070115213644.10BF63FED4@gborg.postgresql.org>

Update of /usr/local/cvsroot/slony1/slony1-engine/tests/one-offs/updatefunctions
In directory gborg.postgresql.org:/tmp/cvs-serv30392/updatefunctions

Log Message:
Directory /usr/local/cvsroot/slony1/slony1-engine/tests/one-offs/updatefunctions added to the repository

From cvsuser  Mon Jan 15 13:38:24 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By cbbrowne: Drafty script (it doesn't entirely
	work yet) to support
Message-ID: <20070115213824.9F8923FED4@gborg.postgresql.org>

Log Message:
-----------
Drafty script (it doesn't entirely work yet) to support comparing
the results of generating a full schema from scratch with the latest
Slony-I release with upgrades of every elder version back to 1.1.0.

This would help us find cases where UPGRADE FUNCTIONS doesn't match
against the latest schema.

Added Files:
-----------
    slony1-engine/tests/one-offs/updatefunctions:
        test-update-functions.sh (r1.1)

-------------- next part --------------
--- /dev/null
+++ tests/one-offs/updatefunctions/test-update-functions.sh
@@ -0,0 +1,88 @@
+#!/bin/sh
+# $Id: test-update-functions.sh,v 1.1 2007/01/15 21:38:24 cbbrowne Exp $
+
+# Where to stow Slony-I checkouts?
+SRCHOME=${SRCHOME:-"/tmp/slony-sources"}
+mkdir -p ${SRCHOME}
+
+# Pick a PostgreSQL build to do this against...
+PGHOME=${PGHOME:-"/opt/OXRS/dbs/pgsql81"}
+PGBINDIR=${PGHOME}/bin
+
+PGPORT=${PGPORT:-"5832"}
+PGHOST=${PGHOST:-"localhost"}
+PGUSER=${PGUSER:-"cbbrowne"}
+PGDATABASE=${PGDATABASE:-"functest"}
+SLONYCLUSTER=${SLONYCLUSTER:-"functest"}
+
+OURCVSROOT=":pserver:anonymous at gborg.postgresql.org:/usr/local/cvsroot/slony1"
+
+ELDERVERSIONS="
+	REL_1_0_0
+	REL_1_0_1
+	REL_1_0_2
+	REL_1_0_4
+	REL_1_0_5
+	REL_1_0_6
+"
+
+VERSIONS="
+	REL_1_1_0
+	REL_1_1_1
+	REL_1_1_2
+	REL_1_1_5
+	REL_1_1_6
+	REL_1_2_0
+	REL_1_2_1
+	REL_1_2_2
+	REL_1_2_5
+	REL_1_2_6
+"
+
+LATESTVERSION=`echo ${VERSIONS} | sort | tail -1`
+
+# Make sure all versions of Slony-I are present and built
+for REL in `echo $VERSIONS | sort`; do
+    if [ -e ${SRCHOME}/slony1-engine-${REL} ] ; then
+      CHECKOUT=0
+   else
+      cd ${SRCHOME}
+echo"     CVSROOT=\"${OURCVSROOT}\"  cvs export -r${REL} slony1-engine"
+     CVSROOT="${OURCVSROOT}"  cvs export -r${REL} slony1-engine
+     mv slony1-engine slony1-engine-${REL}
+     cd ${SRCHOME}/slony1-engine-${REL}
+     if [ echo ${REL} | egrep 'REL_1_2' ] ; then
+       ./configure  --with-pgconfigdir=${PGBINDIR}
+     fi
+     if [ echo ${REL} | egrep 'REL_1_1' ] ; then
+       ./configure  --with-pgconfigdir=${PGBINDIR} --with-pgbindir=${PGBINDIR} --with-pgincludedir=${PGHOME}/include   --with-pgincludeserverdir=${PGHOME}/include/server --with-pglibdir=${PGHOME}/lib   --with-pgpkglibdir=${PGHOME}/lib   --with-pgsharedir=${PGHOME}/share
+     fi
+     make
+  fi
+done
+
+echo <<EOF > $SRCHOME/init-cluster.slonik
+cluster name = ${SLONYCLUSTER};
+node 1 admin conninfo='host=${PGHOST} dbname=${PGDATABASE} user=${PGUSER} port=${PGPORT}';
+init cluster (id=1, 'test cluster for checking schema');
+EOF
+
+echo <<EOF > $SRCHOME/update-functions.slonik
+cluster name = ${SLONYCLUSTER};
+node 1 admin conninfo='host=${PGHOST} dbname=${PGDATABASE} user=${PGUSER} port=${PGPORT}';
+update functions (id=1);
+EOF
+
+for rel in `echo $VERSIONS | sort`; do
+  ${PGBINDIR}/dropdb -h ${PGHOST} -p ${PGPORT} -U ${PGUSER} ${PGDATABASE}
+  ${PGBINDIR}/createdb -h ${PGHOST} -p ${PGPORT} -U ${PGUSER} ${PGDATABASE}
+  ${PGBINDIR}/createlang -h ${PGHOST} -p ${PGPORT} -U ${PGUSER} plpgsql ${PGDATABASE}
+  cd ${SRCHOME}/slony1-engine-${rel}
+  make install
+  ${PGBINDIR}/slonik ${SRCHOME}/init-cluster.slonik
+  cd ${SRCHOME}/slony1-engine-${LATESTVERSION}
+  make install
+  ${PGBINDIR}/slonik ${SRCHOME}/update-functions.slonik
+  mkdir -p $SRCHOME/relschemas
+  ${PGBINDIR}/pg_dump  -h ${PGHOST} -p ${PGPORT} -U ${PGUSER} ${PGDATABASE} > $SRCHOME/relschemas/${rel}-to-${LATESTVERSION}.sql
+done

From cvsuser  Thu Jan 18 18:29:59 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By dfetter: Testing a commit for Josh Drake.
Message-ID: <20070119022959.1CFEE3FB90@gborg.postgresql.org>

Log Message:
-----------
Testing a commit for Josh Drake.  Move along.  Nothing to see here.

Added Files:
-----------
    slony1-engine:
        for_josh_drakes_commit_test (r1.1)

-------------- next part --------------


From cvsuser  Thu Jan 18 18:31:07 2007
From: cvsuser (CVS User Account)
Date: Tue Feb 13 08:58:45 2007
Subject: [Slony1-commit] By dfetter: Testing a commit for Josh Drake, part 2.
Message-ID: <20070119023107.658E03FBB0@gborg.postgresql.org>

Log Message:
-----------
Testing a commit for Josh Drake, part 2.  Move along.  Nothing to see here.  This isn't the commit you're looking for.

Removed Files:
-------------
    slony1-engine:
        for_josh_drakes_commit_test

-------------- next part --------------


From root at www.slony.info  Fri Jan 19 15:32:48 2007
From: root at www.slony.info (root)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] commitinfo
Message-ID: <20070119233249.7561D290052@main>

l

From root at www.slony.info  Fri Jan 19 15:39:42 2007
From: root at www.slony.info (root)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] commitinfo
Message-ID: <20070119233945.CBA692902EA@main>

j

From root at www.slony.info  Fri Jan 19 15:40:03 2007
From: root at www.slony.info (root)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] commitinfo
Message-ID: <20070119234115.8952729036A@main>

[A

From root at www.slony.info  Fri Jan 19 15:50:44 2007
From: root at www.slony.info (root)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] commitinfo
Message-ID: <20070119235045.7818929030C@main>

c

From root at www.slony.info  Fri Jan 19 16:53:54 2007
From: root at www.slony.info (root)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] CVSROOT
Message-ID: <20070120005413.3F11329036A@main>

t

From darcyb at www.slony.info  Tue Jan 23 05:11:31 2007
From: darcyb at www.slony.info (,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] /home/cvsd/slony1/slony1-engine COPYRIGHT
Message-ID: <20070123131131.8B0D72902E4@main>



From darcyb at www.slony.info  Tue Jan 23 05:14:38 2007
From: darcyb at www.slony.info (,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] /home/cvsd/slony1/slony1-engine
Message-ID: <20070123131438.E17ED2902E4@main>



From darcyb at www.slony.info  Tue Jan 23 05:21:11 2007
From: darcyb at www.slony.info (,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] COPYRIGHT 1.22 1.23
Message-ID: <20070123132111.2E042290370@main>

Update of /home/cvsd/slony1/slony1-engine
In directory main:/tmp/cvs-serv16463

Modified Files:
	COPYRIGHT 
Log Message:
Test Committ


Index: COPYRIGHT
===================================================================
RCS file: /home/cvsd/slony1/slony1-engine/COPYRIGHT,v
retrieving revision 1.22
retrieving revision 1.23
diff -C2 -d -r1.22 -r1.23
*** COPYRIGHT	23 Jan 2007 13:14:36 -0000	1.22
--- COPYRIGHT	23 Jan 2007 13:21:09 -0000	1.23
***************
*** 1,3 ****
! Slony-I - A replication system for the PostgreSQL Database Management System
  
  Copyright (c) 2003-2007, PostgreSQL Global Development Group
--- 1,3 ----
! Slony-I - A killer replication system for the PostgreSQL Database Management System
  
  Copyright (c) 2003-2007, PostgreSQL Global Development Group


From darcyb at www.slony.info  Tue Jan 23 05:25:16 2007
From: darcyb at www.slony.info (,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] COPYRIGHT
Message-ID: <20070123132516.9D058290387@main>

Update of /home/cvsd/slony1/slony1-engine
In directory main:/tmp/cvs-serv16480

Modified Files:
	COPYRIGHT 
Log Message:
Commit test


Index: COPYRIGHT
===================================================================
RCS file: /home/cvsd/slony1/slony1-engine/COPYRIGHT,v
retrieving revision 1.23
retrieving revision 1.24
diff -C2 -d -r1.23 -r1.24
*** COPYRIGHT	23 Jan 2007 13:21:09 -0000	1.23
--- COPYRIGHT	23 Jan 2007 13:25:14 -0000	1.24
***************
*** 1,3 ****
! Slony-I - A killer replication system for the PostgreSQL Database Management System
  
  Copyright (c) 2003-2007, PostgreSQL Global Development Group
--- 1,3 ----
! Slony-I - A replication system for the PostgreSQL Database Management System
  
  Copyright (c) 2003-2007, PostgreSQL Global Development Group


From darcyb at lists.slony.info  Tue Jan 23 05:33:50 2007
From: darcyb at lists.slony.info (,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] COPYRIGHT
Message-ID: <20070123133350.75947290388@main>

Update of /home/cvsd/slony1/slony1-engine
In directory main:/tmp/cvs-serv16511

Modified Files:
	COPYRIGHT 
Log Message:
Update the description of slony-I


Index: COPYRIGHT
===================================================================
RCS file: /home/cvsd/slony1/slony1-engine/COPYRIGHT,v
retrieving revision 1.24
retrieving revision 1.25
diff -C2 -d -r1.24 -r1.25
*** COPYRIGHT	23 Jan 2007 13:25:14 -0000	1.24
--- COPYRIGHT	23 Jan 2007 13:33:48 -0000	1.25
***************
*** 1,3 ****
! Slony-I - A replication system for the PostgreSQL Database Management System
  
  Copyright (c) 2003-2007, PostgreSQL Global Development Group
--- 1,3 ----
! Slony-I - An asynchronous replication system for the PostgreSQL Database Management System
  
  Copyright (c) 2003-2007, PostgreSQL Global Development Group


From darcyb at lists.slony.info  Thu Jan 25 08:28:19 2007
From: darcyb at lists.slony.info (,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-engine COPYRIGHT
Message-ID: <20070125162819.C4438290391@main>

Update of /home/cvsd/slony1/slony1-engine
In directory main:/tmp/cvs-serv17766

Modified Files:
	COPYRIGHT 
Log Message:
Update to include 2007


Index: COPYRIGHT
===================================================================
RCS file: /home/cvsd/slony1/slony1-engine/COPYRIGHT,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** COPYRIGHT	14 Apr 2005 16:44:51 -0000	1.3
--- COPYRIGHT	25 Jan 2007 16:28:17 -0000	1.4
***************
*** 1,5 ****
  Slony-I - A replication system for the PostgreSQL Database Management System
  
! Copyright (c) 2003-2005, PostgreSQL Global Development Group
  
  Permission to use, copy, modify, and distribute this software and its
--- 1,5 ----
  Slony-I - A replication system for the PostgreSQL Database Management System
  
! Copyright (c) 2003-2007, PostgreSQL Global Development Group
  
  Permission to use, copy, modify, and distribute this software and its


From cbbrowne at lists.slony.info  Thu Jan 25 09:16:24 2007
From: cbbrowne at lists.slony.info (Chris Browne,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-engine/doc/website index.html
Message-ID: <20070125171624.DDE69290389@main>

Update of /home/cvsd/slony1/slony1-engine/doc/website
In directory main:/tmp/cvs-serv18131

Modified Files:
	index.html 
Log Message:
Add more commentary about the migration from gBorg


Index: index.html
===================================================================
RCS file: /home/cvsd/slony1/slony1-engine/doc/website/index.html,v
retrieving revision 1.5
retrieving revision 1.6
diff -C2 -d -r1.5 -r1.6
*** index.html	25 Jan 2007 17:02:24 -0000	1.5
--- index.html	25 Jan 2007 17:16:22 -0000	1.6
***************
*** 91,98 ****
            <p>It will soon be able to be actively used for Slony-I
            CVS, downloads, and mailing lists; it's not <i>quite</i>
!           ready yet, so for now, you likely want to look to the
            <a href=
            "http://gborg.postgresql.org/project/slony1/projdisplay.php">
!           gBorg Slony-I project</a></p>
  
            <h1>Slony-I</h1>
--- 91,101 ----
            <p>It will soon be able to be actively used for Slony-I
            CVS, downloads, and mailing lists; it's not <i>quite</i>
!           ready yet, so for now, you likely still want to look to the
            <a href=
            "http://gborg.postgresql.org/project/slony1/projdisplay.php">
!           gBorg Slony-I project</a> for the time being.</p>
! 
!           <p> There will be announcements on the gBorg-based mailing
!           lists indicating the migration when all is ready... </p>
  
            <h1>Slony-I</h1>


From cbbrowne at lists.slony.info  Thu Jan 25 11:30:17 2007
From: cbbrowne at lists.slony.info (Chris Browne,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/downloads slony1-1.2.6-docs.tar.bz2
Message-ID: <20070125193017.E92D12902D3@main>

Update of /home/cvsd/slony1/slony1-www/downloads
In directory main:/tmp/cvs-serv18407

Removed Files:
	slony1-1.2.6-docs.tar.bz2 
Log Message:
Remove docs file accidentally added to CVS


--- slony1-1.2.6-docs.tar.bz2 DELETED ---


From cbbrowne at lists.slony.info  Thu Jan 25 11:42:58 2007
From: cbbrowne at lists.slony.info (Chris Browne,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www cvs.html
Message-ID: <20070125194258.468502903A4@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv18429

Modified Files:
	cvs.html 
Log Message:
Add CVS access configuration


Index: cvs.html
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/cvs.html,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -C2 -d -r1.1.1.1 -r1.2
*** cvs.html	25 Jan 2007 19:26:19 -0000	1.1.1.1
--- cvs.html	25 Jan 2007 19:42:56 -0000	1.2
***************
*** 89,92 ****
--- 89,121 ----
            <p>This will eventually discuss how to get at Slony-I
            CVS...</p>
+ 
+           <h1>Anonymous CVS Access</h1>
+ 
+           <p>You may access Slony-I sources via anonymous CVS using
+           the following command:</p>
+           <pre>
+ CVSROOT=":pserver:anonymous@main.slony.info:/slony1" cvs login
+ (when it prompts for a password, you may press [enter])
+ CVSROOT=":pserver:anonymous@main.slony.info:/slony1" cvs co slony1-engine
+ </pre>
+ 
+           <h1>Developer CVS Access</h1>
+ 
+           <p>If you are one of the developers, and have had your
+           ssh key added in on a suitable account, you can access as
+           a specific user with update privileges:</p>
+           <pre>
+ MYSLONYNAME=cbbrowne CVS_RSH=ssh CVSROOT=":ext:${MYSLONYNAME}@main.slony.info:/home/cvsd/slony1" cvs co slony1-engine
+ </pre>
+ 
+           <h1>Modules Available</h1>
+ 
+           <ul>
+             <li><tt>slony1-engine</tt> - the replication engine
+             project</li>
+ 
+             <li><tt>slony1-www</tt> - web site material for
+             main.slony.info</li>
+           </ul>
            <hr>
  
***************
*** 96,100 ****
            </address><!-- Created: Thu Jan 25 11:44:43 EST 2007 -->
            <!-- hhmts start -->
!           Last modified: Thu Jan 25 11:46:45 EST 2007 
            <!-- hhmts end -->
          </td>
--- 125,129 ----
            </address><!-- Created: Thu Jan 25 11:44:43 EST 2007 -->
            <!-- hhmts start -->
!           Last modified: Thu Jan 25 14:42:23 EST 2007 
            <!-- hhmts end -->
          </td>


From cbbrowne at lists.slony.info  Thu Jan 25 12:01:00 2007
From: cbbrowne at lists.slony.info (Chris Browne,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www admin.html
Message-ID: <20070125200100.3161229028B@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv18546

Modified Files:
	admin.html 
Log Message:
Describe where web pages live on main.cvs.info


Index: admin.html
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/admin.html,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -C2 -d -r1.1.1.1 -r1.2
*** admin.html	25 Jan 2007 19:26:19 -0000	1.1.1.1
--- admin.html	25 Jan 2007 20:00:58 -0000	1.2
***************
*** 84,89 ****
            </table>
  
!           <h1><font face="lucida,arial,helvetica" size="2">Project
!           Admin Area</font></h1>Heh. Doesn't exist yet...
            <hr>
  
--- 84,105 ----
            </table>
  
!           <h1>Project Admin Area</h1>
! 
!           <p>Heh. Doesn't much exist yet...</p>
! 
!           <h1>Web Site and CVS</h1>
! 
!           <p>The Slony-I web site physically resides at path
!           <tt>/home/community/slony/htdocs</tt> , and is an
!           anonymous checkout of the <tt>slony1-www</tt> <a href=
!           "cvs.html">CVS repository.</a></p>
! 
!           <p>As a result, if you make changes directly, you'll want
!           to do a <tt>cvs diff</tt> to extract those changes, and
!           apply them to some not-so-anonymous copy of CVS that you
!           have access to. Then please commit such changes to CVS
!           and see about doing a <tt>cvs update</tt> in the
!           <tt>htdocs</tt> directory to deploy those changes "to
!           production."</p>
            <hr>
  
***************
*** 93,97 ****
            </address><!-- Created: Thu Jan 25 11:38:58 EST 2007 -->
            <!-- hhmts start -->
!           Last modified: Thu Jan 25 11:46:42 EST 2007 
            <!-- hhmts end -->
          </td>
--- 109,113 ----
            </address><!-- Created: Thu Jan 25 11:38:58 EST 2007 -->
            <!-- hhmts start -->
!           Last modified: Thu Jan 25 15:00:09 EST 2007 
            <!-- hhmts end -->
          </td>


From xfade at lists.slony.info  Fri Jan 26 09:29:20 2007
From: xfade at lists.slony.info (,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www index.html
Message-ID: <20070126172920.6AB6A290320@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv18807

Modified Files:
	index.html 
Log Message:
Testing

Index: index.html
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/index.html,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -C2 -d -r1.1.1.1 -r1.2
*** index.html	25 Jan 2007 19:26:19 -0000	1.1.1.1
--- index.html	26 Jan 2007 17:29:18 -0000	1.2
***************
*** 6,10 ****
    "HTML Tidy for Linux/x86 (vers 1 September 2005), see www.w3.org">
  
!   <title>Slony-I</title>
  <style type="text/css">
  a:link{
--- 6,10 ----
    "HTML Tidy for Linux/x86 (vers 1 September 2005), see www.w3.org">
  
!   <title>Slony-I - "master to multiple slaves" replication system with cascading and failover</title>
  <style type="text/css">
  a:link{


From xfade at lists.slony.info  Fri Jan 26 10:50:30 2007
From: xfade at lists.slony.info (,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www index.html
Message-ID: <20070126185030.D4B2C290320@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv18899

Modified Files:
	index.html 
Log Message:
testing again

Index: index.html
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/index.html,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** index.html	26 Jan 2007 17:29:18 -0000	1.2
--- index.html	26 Jan 2007 18:50:28 -0000	1.3
***************
*** 1,4 ****
  <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
- 
  <html>
  <head>
--- 1,3 ----


From xfade at lists.slony.info  Fri Jan 26 10:52:04 2007
From: xfade at lists.slony.info (,,,)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www index.html
Message-ID: <20070126185204.4A79129039C@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv18987

Modified Files:
	index.html 
Log Message:
testing again..

Index: index.html
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/index.html,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** index.html	26 Jan 2007 18:50:28 -0000	1.3
--- index.html	26 Jan 2007 18:52:02 -0000	1.4
***************
*** 4,8 ****
    <meta name="generator" content=
    "HTML Tidy for Linux/x86 (vers 1 September 2005), see www.w3.org">
- 
    <title>Slony-I - "master to multiple slaves" replication system with cascading and failover</title>
  <style type="text/css">
--- 4,7 ----


From xfade at lists.slony.info  Mon Jan 29 04:20:10 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/images header-background.png
	header-left.png header-right.png intro-header-bg.png
	intro-header-left.png intro-header-right.png
Message-ID: <20070129122010.B1E292903AD@main>

Update of /home/cvsd/slony1/slony1-www/images
In directory main:/tmp/cvs-serv19877/images

Added Files:
	header-background.png header-left.png header-right.png 
	intro-header-bg.png intro-header-left.png 
	intro-header-right.png 
Log Message:
Add first part of new website layout.

--- NEW FILE: intro-header-left.png ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: header-background.png ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: header-right.png ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: intro-header-bg.png ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: intro-header-right.png ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: header-left.png ---
(This appears to be a binary file; contents omitted.)


From xfade at lists.slony.info  Mon Jan 29 04:20:10 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www test.html
Message-ID: <20070129122010.A1D352903A6@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv19877

Added Files:
	test.html 
Log Message:
Add first part of new website layout.

--- NEW FILE: test.html ---
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
<title>Slony-I</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" />
<!-- Design Copyright 2007 Niels Breet -->
</head>

<body>
<div class="header">
  <div class="left">
  <div class="menu">
    <a href="">Link1</a> 
    <a href="">Link2</a> 
    <a href="">Link3</a> 
    <a href="">Link4</a> 
  </div>
  </div>
  <div class="right">
  </div>
</div>

<div class="content">
  <div class="col1">
    <div class="intro-header">
      <div class="left"></div>
      <div class="right"><a href="">Title here</a></div>
    </div>
  </div>
  <div class="col2">
    <div class="intro-header">
      <div class="left"></div>
      <div class="right"><a href="">Title here</a></div>
    </div>
  </div>
</div>
</body>
</html>


From xfade at lists.slony.info  Mon Jan 29 04:23:37 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www style.css
Message-ID: <20070129122337.B380E2903AE@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv19937

Added Files:
	style.css 
Log Message:
Add the stylesheet too.

--- NEW FILE: style.css ---
body{
  font-family: sans serif;
  font-size: 10pt;
  margin: 8px;
}

.header{
  min-width: 782px;
  margin: 0;
  height: 108px;
  background: url('images/header-background.png') top left repeat-x;
  overflow: hidden;
}

.header .left{
  margin-left: 0;
  float: left;
  background: url('images/header-left.png') top left;
  width: 575px;
  height: 108px;
  overflow: hidden;
}

.header .right{
  float: right;
  background: url('images/header-right.png') top right;
  width: 206px;
  height: 108px;
  overflow: hidden;
}

.header .menu{
  position: relative;
  left: 330px;
  top: 82px;
  margin: 0;
  padding: 0;
  height: 20px;
}

.header .menu a{
  color: #ffffff;
  text-decoration: none;
  font-size: 14pt;
  font-weight: bold;
}

.header .menu a:hover{
  color: #cccccc;
}

.content{
  width: 100%;
}

.col1{
  float: left;
  width: 59%;
}

.col2{
  float: left;
  margin-left: 1%;
  width: 40%;
}

.intro-header{
  width: 100%;
  height: 28px;
  background: url('images/intro-header-bg.png') top left repeat-x;
  overflow: hidden;
}

.intro-header .left{
  background: url('images/intro-header-left.png') top left no-repeat;
  width: 4%;
  height: 28px;
  float: left;
}

.intro-header .right{
  width: 96%;
  height: 26px;
  float: left;
  background: url('images/intro-header-right.png') top right no-repeat;
  overflow: hidden;
  padding-top: 2px;
}

.intro-header .right a{
  color: #cccccc;
  text-decoration: none;
  font-size: 14pt;
  font-weight: bold;
}

.intro-header .right a:hover{
  color: #aaaacc;
  text-decoration: none;
  font-size: 14pt;
  font-weight: bold;
}


From cbbrowne at lists.slony.info  Mon Jan 29 11:30:16 2007
From: cbbrowne at lists.slony.info (Chris Browne)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www index.html
Message-ID: <20070129193016.32C1E290323@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv20439

Modified Files:
	index.html 
Log Message:
1.  Add in missing </ol> tag

2.  Add link to admin guide on upgrading Slony-I



Index: index.html
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/index.html,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** index.html	26 Jan 2007 18:52:02 -0000	1.4
--- index.html	29 Jan 2007 19:30:14 -0000	1.5
***************
*** 1,8 ****
  <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
  <html>
  <head>
    <meta name="generator" content=
    "HTML Tidy for Linux/x86 (vers 1 September 2005), see www.w3.org">
!   <title>Slony-I - "master to multiple slaves" replication system with cascading and failover</title>
  <style type="text/css">
  a:link{
--- 1,11 ----
  <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+ 
  <html>
  <head>
    <meta name="generator" content=
    "HTML Tidy for Linux/x86 (vers 1 September 2005), see www.w3.org">
! 
!   <title>Slony-I - "master to multiple slaves" replication system
!   with cascading and failover</title>
  <style type="text/css">
  a:link{
***************
*** 89,99 ****
            <p>It will soon be able to be actively used for Slony-I
            CVS, downloads, and mailing lists; it's not <i>quite</i>
!           ready yet, so for now, you likely still want to look to the
!           <a href=
            "http://gborg.postgresql.org/project/slony1/projdisplay.php">
            gBorg Slony-I project</a> for the time being.</p>
  
!           <p> There will be announcements on the gBorg-based mailing
!           lists indicating the migration when all is ready... </p>
  
            <h1>Slony-I</h1>
--- 92,102 ----
            <p>It will soon be able to be actively used for Slony-I
            CVS, downloads, and mailing lists; it's not <i>quite</i>
!           ready yet, so for now, you likely still want to look to
!           the <a href=
            "http://gborg.postgresql.org/project/slony1/projdisplay.php">
            gBorg Slony-I project</a> for the time being.</p>
  
!           <p>There will be announcements on the gBorg-based mailing
!           lists indicating the migration when all is ready...</p>
  
            <h1>Slony-I</h1>
***************
*** 175,208 ****
              </li>
  
!             <li>Start all slon replication engines.
  
!               <h1>Libpq requirements</h1>
  
!               <p>The multithreaded replication engine requires the
!               libpq client library to be compiled with
!               --enable-thread-safety on certain operating systems.
!               Known are thus far Solaris and AIX. Other operating
!               systems are known to not require this (Linux-X86,
!               FreeBSD-X86, FreeBSD-Alpha, OpenBSD-Sparc64 and OSX).
!               The configuration script is broken with respect to
!               the --enable-thread-safety switch for Solaris. Please
!               apply this patch, configure and recompile libpq:
!               <a href=
!               "http://developer.postgresql.org/%7Ewieck/slony1/download/threadsafe-libpq-742.diff.gz">
!               threadsafe-libpq-742.diff.gz.</a></p>
  
!               <h1>RPMs</h1>
  
!               <p>RPM files for some versions of Red Hat Linux are
!               available <a href=
!               "http://pgfoundry.org/projects/slony1">here</a> ,
!               including SRPM (Source RPM) files that may be helpful
!               if you wish to generate RPM files for distributions
!               not yet supported.</p>
  
!               <p>This project is released under the Berkeley/BSD
!               license.</p>
!             </li>
!           </ol>
            <hr>
  
--- 178,213 ----
              </li>
  
!             <li>Start all slon replication engines.</li>
!           </ol>
  
!           <p>For more details, see also <a href=
!           "./adminguide/slony1-1.2.6/doc/adminguide/slonyupgrade.html">
!           Upgrading Slony-I</a> .</p>
  
!           <h1>Libpq requirements</h1>
  
!           <p>The multithreaded replication engine requires the
!           libpq client library to be compiled with
!           --enable-thread-safety on certain operating systems.
!           Known are thus far Solaris and AIX. Other operating
!           systems are known to not require this (Linux-X86,
!           FreeBSD-X86, FreeBSD-Alpha, OpenBSD-Sparc64 and OSX). The
!           configuration script is broken with respect to the
!           --enable-thread-safety switch for Solaris. Please apply
!           this patch, configure and recompile libpq: <a href=
!           "http://developer.postgresql.org/%7Ewieck/slony1/download/threadsafe-libpq-742.diff.gz">
!           threadsafe-libpq-742.diff.gz.</a></p>
  
!           <h1>RPMs</h1>
  
!           <p>RPM files for some versions of Red Hat Linux are
!           available <a href=
!           "http://pgfoundry.org/projects/slony1">here</a> ,
!           including SRPM (Source RPM) files that may be helpful if
!           you wish to generate RPM files for distributions not yet
!           supported.</p>
! 
!           <p>This project is released under the Berkeley/BSD
!           license.</p>
            <hr>
  
***************
*** 212,216 ****
            </address><!-- Created: Thu Jan 25 11:13:08 EST 2007 -->
            <!-- hhmts start -->
!           Last modified: Thu Jan 25 12:01:53 EST 2007 
            <!-- hhmts end -->
          </td>
--- 217,221 ----
            </address><!-- Created: Thu Jan 25 11:13:08 EST 2007 -->
            <!-- hhmts start -->
!           Last modified: Mon Jan 29 14:29:05 EST 2007 
            <!-- hhmts end -->
          </td>


From cbbrowne at lists.slony.info  Mon Jan 29 11:53:08 2007
From: cbbrowne at lists.slony.info (Chris Browne)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www admin.html
Message-ID: <20070129195308.303B829038E@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv20479

Modified Files:
	admin.html 
Log Message:
Add in some documentation of things that need to get backed up, and how
to do so using Unison...


Index: admin.html
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/admin.html,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** admin.html	25 Jan 2007 20:00:58 -0000	1.2
--- admin.html	29 Jan 2007 19:53:06 -0000	1.3
***************
*** 104,107 ****
--- 104,203 ----
            <hr>
  
+           <h1>Backups</h1>
+ 
+           <p>Both <tt>rsync</tt> and <tt>unison</tt> are installed;
+           either may be used to backup important parts of the web
+           site.</p>
+ 
+           <p>Here are the contents of a set of Unison <tt>.prf</tt>
+           files suitable for backing up CVS, mailing lists, and the
+           local web site contents.</p>
+ 
+           <ol>
+             <li>Unison configuration - <tt>cmdcvs.prf</tt>
+               <pre>
+ root = /home/cbbrowne/Slony-I/CMD/cvsbackup
+ root = ssh://cvs.slony.info//home/cvsd/slony1
+ </pre>
+             </li>
+ 
+             <li>Unison configuration -
+             <tt>cmdmailman-admin.prf</tt>
+               <pre>
+ root = /home/cbbrowne/Slony-I/CMD/mailman-backup/admin
+ root = ssh://cvs.slony.info//var/lib/mailman/archives/private/slony-admin
+ 
+ </pre>
+             </li>
+ 
+             <li>Unison configuration - <tt>cmdmailman-bugs.prf</tt>
+               <pre>
+ root = /home/cbbrowne/Slony-I/CMD/mailman-backup/bugs
+ root = ssh://cvs.slony.info//var/lib/mailman/archives/private/slony-bugs
+ 
+ </pre>
+             </li>
+ 
+             <li>Unison configuration -
+             <tt>cmdmailman-commit.prf</tt>
+               <pre>
+ root = /home/cbbrowne/Slony-I/CMD/mailman-backup/commit
+ root = ssh://cvs.slony.info//var/lib/mailman/archives/private/slony-commit
+ 
+ </pre>
+             </li>
+ 
+             <li>Unison configuration -
+             <tt>cmdmailman-general.prf</tt>
+               <pre>
+ root = /home/cbbrowne/Slony-I/CMD/mailman-backup/general
+ root = ssh://cvs.slony.info//var/lib/mailman/archives/private/slony-general
+ 
+ </pre>
+             </li>
+ 
+             <li>Unison configuration -
+             <tt>cmdmailman-hackers.prf</tt>
+               <pre>
+ root = /home/cbbrowne/Slony-I/CMD/mailman-backup/hackers
+ root = ssh://cvs.slony.info//var/lib/mailman/archives/private/slony-hackers
+ 
+ </pre>
+             </li>
+ 
+             <li>Unison configuration -
+             <tt>cmdmailman-patches.prf</tt>
+               <pre>
+ root = /home/cbbrowne/Slony-I/CMD/mailman-backup/patches
+ root = ssh://cvs.slony.info//var/lib/mailman/archives/private/slony-patches
+ 
+ </pre>
+             </li>
+ 
+             <li>Unison configuration - <tt>cmdweb.prf</tt>
+               <pre>
+ root = /home/cbbrowne/Slony-I/CMD/webbackup
+ root = ssh://cvs.slony.info//home/community/slony
+ </pre>
+             </li>
+           </ol>
+ 
+           <h2>Usage</h2>
+ 
+           <p>If you are using Unison, you might write the above
+           files into your local <tt>${HOME}/.unison</tt> directory,
+           and then use them as follows:</p>
+           <pre>
+ cd ${HOME}.unison
+ for target in `ls cmd*prf | cut -d "." -f 1`; do
+    unison ${target}
+ done
+ </pre>
+ 
+           <p>By default, this will request user intervention to
+           indicate the direction in which to propagate updates; if
+           you know what you're doing, you can tell
+           <tt>unison</tt>to "just do it."</p>
+ 
            <address>
              <a href="mailto:cbbrowne@ca.afilias.info">Christopher
***************
*** 109,113 ****
            </address><!-- Created: Thu Jan 25 11:38:58 EST 2007 -->
            <!-- hhmts start -->
!           Last modified: Thu Jan 25 15:00:09 EST 2007 
            <!-- hhmts end -->
          </td>
--- 205,209 ----
            </address><!-- Created: Thu Jan 25 11:38:58 EST 2007 -->
            <!-- hhmts start -->
!           Last modified: Mon Jan 29 14:52:13 EST 2007 
            <!-- hhmts end -->
          </td>


From xfade at lists.slony.info  Tue Jan 30 02:07:51 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/images slon-slonik.png
Message-ID: <20070130100751.5E0EE2902CA@main>

Update of /home/cvsd/slony1/slony1-www/images
In directory main:/tmp/cvs-serv20574/images

Added Files:
	slon-slonik.png 
Log Message:
Add image of elephants. Original image by Christophe EYQUEM. Downloaded from: http://www.freemages.fr/browse/show.php?id=295 . Removed background, so it fits in our website.

--- NEW FILE: slon-slonik.png ---
(This appears to be a binary file; contents omitted.)


From xfade at lists.slony.info  Tue Jan 30 02:11:14 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/images intro-body-bottom-left.png
	intro-body-bottom-mid.png intro-body-bottom-right.png
	intro-body-top-left.png intro-body-top-mid.png
	intro-body-top-right.png
Message-ID: <20070130101114.7565F2903B1@main>

Update of /home/cvsd/slony1/slony1-www/images
In directory main:/tmp/cvs-serv20597

Added Files:
	intro-body-bottom-left.png intro-body-bottom-mid.png 
	intro-body-bottom-right.png intro-body-top-left.png 
	intro-body-top-mid.png intro-body-top-right.png 
Log Message:
Add images for text blocks

--- NEW FILE: intro-body-top-mid.png ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: intro-body-bottom-left.png ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: intro-body-bottom-right.png ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: intro-body-top-left.png ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: intro-body-bottom-mid.png ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: intro-body-top-right.png ---
(This appears to be a binary file; contents omitted.)


From xfade at lists.slony.info  Tue Jan 30 02:17:27 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/images slon-slonik.png
Message-ID: <20070130101727.8D13D2903A7@main>

Update of /home/cvsd/slony1/slony1-www/images
In directory main:/tmp/cvs-serv20617

Modified Files:
	slon-slonik.png 
Log Message:
Add fake drop shadow.

Index: slon-slonik.png
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/images/slon-slonik.png,v
retrieving revision 1.1
retrieving revision 1.2
diff -C2 -d -r1.1 -r1.2
Binary files /tmp/cvs4srNcF and /tmp/cvs9ADHOx differ


From xfade at lists.slony.info  Tue Jan 30 02:42:11 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www style.css test.html
Message-ID: <20070130104211.E875B2903B2@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv20635

Modified Files:
	style.css test.html 
Log Message:
Updates to style and test page. Basic layout should now be complete.

Index: test.html
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/test.html,v
retrieving revision 1.1
retrieving revision 1.2
diff -C2 -d -r1.1 -r1.2
*** test.html	29 Jan 2007 12:20:08 -0000	1.1
--- test.html	30 Jan 2007 10:42:09 -0000	1.2
***************
*** 16,20 ****
      <a href="">Link2</a> 
      <a href="">Link3</a> 
!     <a href="">Link4</a> 
    </div>
    </div>
--- 16,20 ----
      <a href="">Link2</a> 
      <a href="">Link3</a> 
!     <a href="">Link4gp</a> 
    </div>
    </div>
***************
*** 25,33 ****
--- 25,101 ----
  <div class="content">
    <div class="col1">
+   
+     <div class="intro-header">
+       <div class="left"></div>
+       <div class="right"><a href="#">Slony-I - introduction</a></div>
+     </div>
+     <div class="intro-body">
+       <div class="top">
+         <div class="top-left"></div>
+         <div class="top-right"></div>
+       </div>
+       <div class="text-intro">
+ 	<p><b>Slony-I</b> is a "master to multiple slaves"
+           replication system with cascading and failover.</p>
+ 
+           <p>The <i>big picture</i> for the development of Slony-I
+           is a master-slave system that includes all features and
+           capabilities needed to replicate large databases to a
+           reasonably limited number of slave systems.</p>
+ 
+           <p>Slony-I is a system for data centers and backup sites,
+           where the normal mode of operation is that all nodes are
+           available.</p>
+ 
+           <p>A fairly extensive "admin guide" comprising material
+           in the CVS tree may be found <a href=
+           "http://linuxdatabases.info/info/slony.html">here</a>
+           There is also a local copy <a href=
+           "adminguide/slony1-1.2.6/doc/adminguide/index.html">here</a></p>
+ 
+           <p>The original design document is available <a href=
+           "http://developer.postgresql.org/%7Ewieck/slony1/Slony-I-concept.pdf">
+ 
+           here</a>.</p>
+       </div>
+       <div class="bottom">
+         <div class="bottom-left"></div>
+         <div class="bottom-right"></div>
+       </div>
+     </div>
+ 
+ 
      <div class="intro-header">
        <div class="left"></div>
        <div class="right"><a href="">Title here</a></div>
      </div>
+     <div class="intro-body">
+       <div class="top">
+         <div class="top-left"></div>
+         <div class="top-right"></div>
+       </div>
+       <div class="text"> bla bla bla <br />
+       lalala lalalalgga appllaa <br />
+       lalala lalalalgga appllaa <br />
+       lalala lalalalgga appllaa <br />
+       lalala lalalalgga appllaa <br />
+       lalala lalalalgga appllaa <br />
+       lalala lalalalgga appllaa <br />
+       lalala lalalalgga appllaa <br />
+       lalala lalalalgga appllaa <br />
+       lalala lalalalgga appllaa <br />
+       lalala lalalalgga appllaa <br />
+       lalala lalalalgga appllaa <br />
+       asldl;<a href="">adjfggafd</a> dfjskldfs d
+       </div>
+       <div class="bottom">
+         <div class="bottom-left"></div>
+         <div class="bottom-right"></div>
+       </div>
+     </div>
+ 
+   
    </div>
+   
    <div class="col2">
      <div class="intro-header">
***************
*** 35,40 ****
--- 103,132 ----
        <div class="right"><a href="">Title here</a></div>
      </div>
+     <div class="intro-body">
+       <div class="top">
+         <div class="top-left"></div>
+         <div class="top-right"></div>
+       </div>
+       <div class="text"><p> bla bla bla</p>
+       <p>lalala lalalalgga appllaa</p>
+       <p>asldl;<a href="">adjfggafd</a> dfjskldfs d</p>
+       </div>
+       <div class="bottom">
+         <div class="bottom-left"></div>
+         <div class="bottom-right"></div>
+       </div>
+     </div>
+ 
+   </div>
+   
+   <br clear="all">
+   <div class="footer">
+     <div class="intro-header">
+       <div class="left"></div>
+       <div class="right"><div class="copyright">Content &copy; 2007 Slony Development Group</div></div>
+     </div>
    </div>
  </div>
+ 
  </body>
  </html>

Index: style.css
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/style.css,v
retrieving revision 1.1
retrieving revision 1.2
diff -C2 -d -r1.1 -r1.2
*** style.css	29 Jan 2007 12:23:35 -0000	1.1
--- style.css	30 Jan 2007 10:42:09 -0000	1.2
***************
*** 1,5 ****
  body{
    font-family: sans serif;
!   font-size: 10pt;
    margin: 8px;
  }
--- 1,6 ----
  body{
    font-family: sans serif;
!   font-size: 12pt;
!   line-height: 100%;
    margin: 8px;
  }
***************
*** 33,37 ****
    position: relative;
    left: 330px;
!   top: 82px;
    margin: 0;
    padding: 0;
--- 34,38 ----
    position: relative;
    left: 330px;
!   top: 86px;
    margin: 0;
    padding: 0;
***************
*** 60,65 ****
  
  .col2{
!   float: left;
!   margin-left: 1%;
    width: 40%;
  }
--- 61,65 ----
  
  .col2{
!   float: right;
    width: 40%;
  }
***************
*** 70,73 ****
--- 70,74 ----
    background: url('images/intro-header-bg.png') top left repeat-x;
    overflow: hidden;
+   margin-top: 10px;
  }
  
***************
*** 81,89 ****
  .intro-header .right{
    width: 96%;
!   height: 26px;
    float: left;
    background: url('images/intro-header-right.png') top right no-repeat;
    overflow: hidden;
!   padding-top: 2px;
  }
  
--- 82,90 ----
  .intro-header .right{
    width: 96%;
!   height: 21px;
    float: left;
    background: url('images/intro-header-right.png') top right no-repeat;
    overflow: hidden;
!   padding-top: 7px;
  }
  
***************
*** 101,102 ****
--- 102,189 ----
    font-weight: bold;
  }
+ 
+ .intro-body{
+   margin: 2px;
+   background-color: #f6f6f6;
+   margin-right: 4px;
+ }
+ 
+ .intro-body .top{
+   background: url('images/intro-body-top-mid.png') top left repeat-x;
+   height: 11px;
+   width: 100%;
+   overflow: hidden;
+ }
+ 
+ .intro-body .top-left, .intro-body .bottom-left{
+   height: 11px;
+   width: 10px;
+   float: left;
+ }
+ 
+ .intro-body .top-right, .intro-body .bottom-right{
+   height: 11px;
+   width: 10px;
+   float: right;
+ }
+ 
+ .intro-body .top-left{
+   background: url('images/intro-body-top-left.png') top left no-repeat;
+ }
+ .intro-body .top-right{
+   background: url('images/intro-body-top-right.png') top right no-repeat;
+ }
+ 
+ .intro-body .bottom{
+   background: url('images/intro-body-bottom-mid.png') top left repeat-x;
+   height: 11px;
+   width: 100%;
+   overflow: hidden;
+ }
+ 
+ .intro-body .bottom-left{
+   background: url('images/intro-body-bottom-left.png') top left no-repeat;
+ }
+ .intro-body .bottom-right{
+   background: url('images/intro-body-bottom-right.png') top right no-repeat;
+ }
+ 
+ .intro-body .text,.intro-body .text-intro{
+   padding-left: 10px;
+   padding-right: 10px;
+   padding-bottom: 4px;
+   border-left: 1px solid black;
+   border-right: 1px solid black;
+ }
+ 
+ .text-intro p, .text p{
+   margin-top: 0;
+   padding-top: 5px;
+   margin-bottom: 0;
+   padding-bottom: 5px;
+ }
+ 
+ .intro-body .text-intro{
+   background: url('images/slon-slonik.png') bottom right no-repeat;
+   min-height: 200px;
+   padding-right: 205px;
+ }
+ 
+ .intro-body .text a, .intro-body .text-intro a{
+   color: #0D1DDF;
+   text-decoration: none;
+ }
+ 
+ .intro-body .text a:hover, .intro-body .text-intro a:hover{
+   color: #183074;
+   text-decoration: underline;
+ }
+ 
+ .copyright{
+   width: 98%;
+   height: 18px;
+   color: #ffffff;
+   text-align: center;
+   overflow: hidden;
+   margin-right: 2%;
+ }
\ No newline at end of file


From xfade at lists.slony.info  Tue Jan 30 03:47:33 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-engine/doc/adminguide slonik_ref.sgml
Message-ID: <20070130114734.035852903B7@main>

Update of /home/cvsd/slony1/slony1-engine/doc/adminguide
In directory main:/tmp/cvs-serv20671

Modified Files:
	slonik_ref.sgml 
Log Message:
Change ID = 2 to ID = 1 as the example talks about set 1 not 2.

Index: slonik_ref.sgml
===================================================================
RCS file: /home/cvsd/slony1/slony1-engine/doc/adminguide/slonik_ref.sgml,v
retrieving revision 1.65
retrieving revision 1.66
diff -C2 -d -r1.65 -r1.66
*** slonik_ref.sgml	31 Oct 2006 22:09:39 -0000	1.65
--- slonik_ref.sgml	30 Jan 2007 11:47:31 -0000	1.66
***************
*** 1265,1269 ****
       WAIT FOR EVENT (ORIGIN = 3, CONFIRMED = 1);
       SYNC (ID=1);
!      MERGE SET ( ID = 2, ADD ID = 9999, ORIGIN = 1 );
      </programlisting>
     </refsect1>
--- 1265,1269 ----
       WAIT FOR EVENT (ORIGIN = 3, CONFIRMED = 1);
       SYNC (ID=1);
!      MERGE SET ( ID = 1, ADD ID = 9999, ORIGIN = 1 );
      </programlisting>
     </refsect1>


From xfade at lists.slony.info  Tue Jan 30 08:05:41 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www index.php layout.php
Message-ID: <20070130160541.82448290292@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv22129

Added Files:
	index.php layout.php 
Log Message:
Very simple cms for slony. Part one

--- NEW FILE: layout.php ---
<?PHP

function layout_header($active=""){
$output = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
<title>Slony-I</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="/style.css" type="text/css" />
<!-- Design Copyright 2007 Niels Breet -->
</head>

<body>
<div class="header">
  <div class="left">
  <div class="menu">
    <a href="/">Home</a> 
    <a href="">CVS</a> 
    <a href="http://lists.slony.info/mailman/listinfo" title="Slony mailinglists">Mailinglists</a> 
  </div>
  </div>
  <div class="right">
  </div>
</div>

<div class="content">
  </div>
';
return $output;
}

function layout_footer(){
$output ='  
  <br clear="all">
  <div class="footer">
    <div class="intro-header">
      <div class="left"></div>
      <div class="right"><div class="copyright">Content &copy; 2007 Slony Development Group</div></div>
    </div>
  </div>
</div>

</body>
</html>
';
return $output;
}


function layout_leftcol_start(){
$output = '
  <div class="col1">
';
return $output;
}

function layout_leftcol_stop(){
$output = '
  </div>
';
return $output;
}

function layout_rightcol_start(){
$output = '
  <div class="col2">
';
return $output;
}

function layout_rightcol_stop(){
$output = '
  </div>
';
return $output;
}


function layout_introblock($title="",$link="",$text=""){
$output ='
    <div class="intro-header">
      <div class="left"></div>
      <div class="right"><a href="'.$link.'">'.$title.'</a></div>

    </div>
    <div class="intro-body">
      <div class="top">
        <div class="top-left"></div>
        <div class="top-right"></div>
      </div>
      <div class="text-intro">
	'.$text.'
      </div>
      <div class="bottom">
        <div class="bottom-left"></div>
        <div class="bottom-right"></div>

      </div>
    </div>
';
return $output;
}

function layout_defaultblock($title="",$link="",$text=""){
$output = '
    <div class="intro-header">
      <div class="left"></div>
      <div class="right"><a href="'.$link.'">'.$title.'</a></div>
    </div>
    <div class="intro-body">

      <div class="top">
        <div class="top-left"></div>
        <div class="top-right"></div>
      </div>
      <div class="text"> 
	'.$text.'
      </div>
      <div class="bottom">

        <div class="bottom-left"></div>
        <div class="bottom-right"></div>
      </div>
    </div>

';
return $output;
}

?>

--- NEW FILE: index.php ---
<?PHP
require_once("layout.php");

$target=$_GET["target"];
//var_dump($target); //debug

switch($target){
  case '404':
	header("HTTP/1.0 404 Not Found");
	echo layout_header();
	echo layout_defaultblock('404, NOT FOUND','',file_get_contents('./content/404.txt'));
	break;
  case 'cvs':
	echo layout_header();
	echo 'cvs';
	break;
  default:
	echo layout_header();
	echo layout_leftcol_start();
	$fp = fopen('./content/intro.txt','r');
	if ($fp){
		$title=fgets($fp,256);
		$link=fgets($fp,256);
		$text="";
		while (!feof($fp)) $text.=fgets($fp,256);
		fclose($fp);
	}
	echo layout_introblock($title,$link,$text);
	echo layout_leftcol_stop();
	echo layout_rightcol_start();

        $fp = fopen('./content/news.txt','r');
        if ($fp){
                $text="";
                while (!feof($fp)){
			 $buf=fgets($fp,256);
			 if (strpos($buf,'---')!==false){
				if ($text != "") echo layout_defaultblock($title,$link,$text);
				$text = "";
				$title = @fgets($fp,256);
				$link = @fgets($fp,256);
			 } else {
				$text .= $buf;
			 }
		}
                fclose($fp);
        }

	echo layout_rightcol_stop();
}


echo layout_footer();

?>


From xfade at lists.slony.info  Tue Jan 30 08:06:00 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/content  - New directory
Message-ID: <20070130160600.32FD52903E1@main>

Update of /home/cvsd/slony1/slony1-www/content
In directory main:/tmp/cvs-serv22148/content

Log Message:
Directory /home/cvsd/slony1/slony1-www/content added to the repository



From xfade at lists.slony.info  Tue Jan 30 08:06:44 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/content 404.txt intro.txt news.txt
Message-ID: <20070130160644.996282903BA@main>

Update of /home/cvsd/slony1/slony1-www/content
In directory main:/tmp/cvs-serv22161/content

Added Files:
	404.txt intro.txt news.txt 
Log Message:
Content for cms

--- NEW FILE: news.txt ---
---
title1
http://
html content here can be multiline
---
title2
url2
second news item
---


--- NEW FILE: intro.txt ---
Slony-I - introduction
#
	<p><b>Slony-I</b> is a "master to multiple slaves"
          replication system with cascading and failover.</p>

          <p>The <i>big picture</i> for the development of Slony-I
          is a master-slave system that includes all features and
          capabilities needed to replicate large databases to a
          reasonably limited number of slave systems.</p>

          <p>Slony-I is a system for data centers and backup sites,
          where the normal mode of operation is that all nodes are
          available.</p>

          <p>A fairly extensive "admin guide" comprising material
          in the CVS tree may be found <a href=
          "http://linuxdatabases.info/info/slony.html">here</a>
          There is also a local copy <a href=
          "adminguide/slony1-1.2.6/doc/adminguide/index.html">here</a></p>

          <p>The original design document is available <a href=
          "http://developer.postgresql.org/%7Ewieck/slony1/Slony-I-concept.pdf">

          here</a>.</p>

--- NEW FILE: 404.txt ---
Oops. 404? Hmm something must be wrong....


From cbbrowne at lists.slony.info  Tue Jan 30 09:08:04 2007
From: cbbrowne at lists.slony.info (Chris Browne)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/content intro.txt news.txt
Message-ID: <20070130170804.5D74C2903A2@main>

Update of /home/cvsd/slony1/slony1-www/content
In directory main:/tmp/cvs-serv22286

Modified Files:
	intro.txt news.txt 
Log Message:
Updated intro file; put in some realistic news items


Index: news.txt
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/content/news.txt,v
retrieving revision 1.1
retrieving revision 1.2
diff -C2 -d -r1.1 -r1.2
*** news.txt	30 Jan 2007 16:06:42 -0000	1.1
--- news.txt	30 Jan 2007 17:08:02 -0000	1.2
***************
*** 1,10 ****
  ---
! title1
! http://
! html content here can be multiline
  ---
! title2
! url2
! second news item
  ---
  
--- 1,11 ----
  ---
! Slony-I New Web Site!
! http://main.slony.info
! Dateline: 2009-01-01 - We are pleased to announce the release of the new Slony-I web site at <tt>main.slony.info</tt>.
  ---
! Slony-I New CVS Site!
! http://main.slony.info/cvs.html
! 2007-01-20 The Slony-I project is now making active use of CVS repositories at <tt>cvs.slony.info</tt>; this replaces the former
! CVS repositories at gBorg.  We thank the gBorg operators for their support over the last few years, and Command Prompt for their provision of hardware, administrative, and hosting services for <tt>cvs.slony.info</tt>.
  ---
  

Index: intro.txt
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/content/intro.txt,v
retrieving revision 1.1
retrieving revision 1.2
diff -C2 -d -r1.1 -r1.2
*** intro.txt	30 Jan 2007 16:06:42 -0000	1.1
--- intro.txt	30 Jan 2007 17:08:02 -0000	1.2
***************
*** 2,24 ****
  #
  	<p><b>Slony-I</b> is a "master to multiple slaves"
!           replication system with cascading and failover.</p>
  
!           <p>The <i>big picture</i> for the development of Slony-I
!           is a master-slave system that includes all features and
!           capabilities needed to replicate large databases to a
!           reasonably limited number of slave systems.</p>
  
!           <p>Slony-I is a system for data centers and backup sites,
!           where the normal mode of operation is that all nodes are
!           available.</p>
  
!           <p>A fairly extensive "admin guide" comprising material
!           in the CVS tree may be found <a href=
!           "http://linuxdatabases.info/info/slony.html">here</a>
!           There is also a local copy <a href=
            "adminguide/slony1-1.2.6/doc/adminguide/index.html">here</a></p>
  
            <p>The original design document is available <a href=
            "http://developer.postgresql.org/%7Ewieck/slony1/Slony-I-concept.pdf">
- 
            here</a>.</p>
--- 2,24 ----
  #
  	<p><b>Slony-I</b> is a "master to multiple slaves"
!           replication system supporting cascading (<em>e.g.</em> - a node can feed another node which feeds another node...)  and failover.</p>
  
!           <p>The <i>big picture</i> for the development of Slony-I is
!           that it is a master-slave replication system that includes
!           all features and capabilities needed to replicate large
!           databases to a reasonably limited number of slave
!           systems.</p>
  
!           <p>Slony-I is a system designed for use at data centers and
!           backup sites, where the normal mode of operation is that all
!           nodes are available.</p>
  
!           <p>A fairly extensive "admin guide" comprising material in
!           the CVS tree may be found <a href=
!           "http://linuxdatabases.info/info/slony.html">here</a> There
!           is also a local copy <a href=
            "adminguide/slony1-1.2.6/doc/adminguide/index.html">here</a></p>
  
            <p>The original design document is available <a href=
            "http://developer.postgresql.org/%7Ewieck/slony1/Slony-I-concept.pdf">
            here</a>.</p>


From cbbrowne at lists.slony.info  Tue Jan 30 09:11:33 2007
From: cbbrowne at lists.slony.info (Chris Browne)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www layout.php
Message-ID: <20070130171133.DDA8429039F@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv22367

Modified Files:
	layout.php 
Log Message:
Update to cvs...


Index: layout.php
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/layout.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -C2 -d -r1.1 -r1.2
*** layout.php	30 Jan 2007 16:05:39 -0000	1.1
--- layout.php	30 Jan 2007 17:11:31 -0000	1.2
***************
*** 17,21 ****
    <div class="menu">
      <a href="/">Home</a> 
!     <a href="">CVS</a> 
      <a href="http://lists.slony.info/mailman/listinfo" title="Slony mailinglists">Mailinglists</a> 
    </div>
--- 17,21 ----
    <div class="menu">
      <a href="/">Home</a> 
!     <a href="/cvs.html">CVS</a> 
      <a href="http://lists.slony.info/mailman/listinfo" title="Slony mailinglists">Mailinglists</a> 
    </div>


From cbbrowne at lists.slony.info  Tue Jan 30 09:30:21 2007
From: cbbrowne at lists.slony.info (Chris Browne)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-engine/src/slonik slonik.c
Message-ID: <20070130173021.F1F1E2903E5@main>

Update of /home/cvsd/slony1/slony1-engine/src/slonik
In directory main:/tmp/cvs-serv22432

Modified Files:
	slonik.c 
Log Message:
Per Mark Stosberg - if uninstallNode() errors out, we should report the node number

Index: slonik.c
===================================================================
RCS file: /home/cvsd/slony1/slony1-engine/src/slonik/slonik.c,v
retrieving revision 1.71
retrieving revision 1.72
diff -C2 -d -r1.71 -r1.72
*** slonik.c	12 Dec 2006 14:54:48 -0000	1.71
--- slonik.c	30 Jan 2007 17:30:19 -0000	1.72
***************
*** 3035,3038 ****
--- 3035,3039 ----
  	if (db_exec_command((SlonikStmt *) stmt, adminfo1, &query) < 0)
  	{
+ 		printf("Failed to exec uninstallNode() for node %d\n", stmt->no_id);
  		dstring_free(&query);
  		return -1;
***************
*** 3040,3043 ****
--- 3041,3045 ----
  	if (db_commit_xact((SlonikStmt *) stmt, adminfo1) < 0)
  	{
+ 		printf("Failed to commit uninstallNode() for node %d\n", stmt->no_id);
  		dstring_free(&query);
  		return -1;
***************
*** 3049,3052 ****
--- 3051,3055 ----
  	if (db_exec_command((SlonikStmt *) stmt, adminfo1, &query) < 0)
  	{
+ 		printf("Failed to drop schema for node %d\n", stmt->no_id);
  		dstring_free(&query);
  		return -1;
***************
*** 3054,3057 ****
--- 3057,3061 ----
  	if (db_commit_xact((SlonikStmt *) stmt, adminfo1) < 0)
  	{
+ 		printf("Failed to commit drop schema for node %d\n", stmt->no_id);
  		dstring_free(&query);
  		return -1;


From xfade at lists.slony.info  Tue Jan 30 11:18:38 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/content cvs.txt
Message-ID: <20070130191838.496132903E2@main>

Update of /home/cvsd/slony1/slony1-www/content
In directory main:/tmp/cvs-serv22820

Added Files:
	cvs.txt 
Log Message:
Text for cvs page.

--- NEW FILE: cvs.txt ---
       <h1>Anonymous CVS Access</h1>

          <p>You may access Slony-I sources via anonymous CVS using
          the following command:</p>
          <pre>
CVSROOT=":pserver:anonymous@main.slony.info:/slony1" cvs login
(when it prompts for a password, you may press [enter])
CVSROOT=":pserver:anonymous@main.slony.info:/slony1" cvs co slony1-engine
</pre>

          <h1>Developer CVS Access</h1>

          <p>If you are one of the developers, and have had your
          ssh key added in on a suitable account, you can access as
          a specific user with update privileges:</p>
          <pre>

MYSLONYNAME=cbbrowne CVS_RSH=ssh CVSROOT=":ext:${MYSLONYNAME}@main.slony.info:/home/cvsd/slony1" cvs co slony1-engine
</pre>

          <h1>Modules Available</h1>

          <ul>
            <li><tt>slony1-engine</tt> - the replication engine
            project</li>

            <li><tt>slony1-www</tt> - web site material for
            main.slony.info</li>

          </ul>


From xfade at lists.slony.info  Tue Jan 30 11:21:54 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/content cvs.txt
Message-ID: <20070130192154.9370B2903E5@main>

Update of /home/cvsd/slony1/slony1-www/content
In directory main:/tmp/cvs-serv22842

Modified Files:
	cvs.txt 
Log Message:
Forgot about the title and url

Index: cvs.txt
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/content/cvs.txt,v
retrieving revision 1.1
retrieving revision 1.2
diff -C2 -d -r1.1 -r1.2
*** cvs.txt	30 Jan 2007 19:18:36 -0000	1.1
--- cvs.txt	30 Jan 2007 19:21:52 -0000	1.2
***************
*** 1,2 ****
--- 1,4 ----
+ Slony-I cvs
+ #
         <h1>Anonymous CVS Access</h1>
  


From xfade at lists.slony.info  Tue Jan 30 11:23:20 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www index.php
Message-ID: <20070130192320.83B0A2903E7@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv22865

Modified Files:
	index.php 
Log Message:
Add cvs page

Index: index.php
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/index.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -C2 -d -r1.1 -r1.2
*** index.php	30 Jan 2007 16:05:39 -0000	1.1
--- index.php	30 Jan 2007 19:23:18 -0000	1.2
***************
*** 13,17 ****
    case 'cvs':
  	echo layout_header();
! 	echo 'cvs';
  	break;
    default:
--- 13,25 ----
    case 'cvs':
  	echo layout_header();
! 	$fp = fopen('./content/cvs.txt','r');
! 	if ($fp){
! 		$title=fgets($fp,256);
! 		$link=fgets($fp,256);
! 		$text="";
! 		while (!feof($fp)) $text.=fgets($fp,256);
! 		fclose($fp);
! 	}
! 	echo layout_defaultblock($title,$link,$text);	
  	break;
    default:


From cbbrowne at lists.slony.info  Tue Jan 30 11:23:21 2007
From: cbbrowne at lists.slony.info (Chris Browne)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-engine/doc/adminguide adminscripts.sgml
	firstdb.sgml monitoring.sgml
Message-ID: <20070130192321.71D412903F0@main>

Update of /home/cvsd/slony1/slony1-engine/doc/adminguide
In directory main:/tmp/cvs-serv22861

Modified Files:
	adminscripts.sgml firstdb.sgml monitoring.sgml 
Log Message:
mark@summersault.com
  * provide examples of using the altperl scripts for initial replication set up.

cbbrowne fixed some tagging


Index: monitoring.sgml
===================================================================
RCS file: /home/cvsd/slony1/slony1-engine/doc/adminguide/monitoring.sgml,v
retrieving revision 1.34
retrieving revision 1.35
diff -C2 -d -r1.34 -r1.35
*** monitoring.sgml	24 Jan 2007 15:42:14 -0000	1.34
--- monitoring.sgml	30 Jan 2007 19:23:19 -0000	1.35
***************
*** 201,205 ****
  Doing commit Slony_replication.wiki with host: logtail and lang: en
  </screen>
- </sect2>
  
  <para> Note that <command>mvs</command> is a client written in Perl;
--- 201,204 ----
***************
*** 209,212 ****
--- 208,212 ----
  may have a packaged version of this under some similar name. </para>
  
+ </sect2>
  </sect1>
  <!-- Keep this comment at the end of the file

Index: adminscripts.sgml
===================================================================
RCS file: /home/cvsd/slony1/slony1-engine/doc/adminguide/adminscripts.sgml,v
retrieving revision 1.45
retrieving revision 1.46
diff -C2 -d -r1.45 -r1.46
*** adminscripts.sgml	5 Jan 2007 19:32:29 -0000	1.45
--- adminscripts.sgml	30 Jan 2007 19:23:19 -0000	1.46
***************
*** 14,34 ****
  <indexterm><primary>altperl scripts for &slony1;</primary></indexterm>
  
! <para>In the <filename>altperl</filename> directory in the
! <application>CVS</application> tree, there is a sizable set of
! <application>Perl</application> scripts that may be used to administer
! a set of &slony1; instances, which support having arbitrary numbers of
! nodes.</para>
  
! <para>Most of them generate Slonik scripts that are then to be passed
! on to the <xref linkend="slonik"> utility to be submitted to all of
! the &slony1; nodes in a particular cluster.  At one time, this
! embedded running <xref linkend="slonik"> on the slonik scripts.
  Unfortunately, this turned out to be a pretty large calibre
  <quote>foot gun</quote>, as minor typos on the command line led, on a
! couple of occasions, to pretty calamitous actions, so the behavior has
! been changed so that the scripts simply submit output to standard
! output.  The savvy administrator should review the script
! <emphasis>before</emphasis> submitting it to <xref
! linkend="slonik">.</para>
  
  <sect3><title>Node/Cluster Configuration - cluster.nodes</title>
--- 14,37 ----
  <indexterm><primary>altperl scripts for &slony1;</primary></indexterm>
  
! <para>There is a set of scripts to simplify administeration
! of set of &slony1; instances. The scripts support having arbitrary numbers of
! nodes. They may be installed as part of the installation process:</para>
  
! <para><command>
!  ./configure --with-perltools
! </command></para>
! 
! <para>This will produce a number of scripts with the prefix <command>slonik_</command>.
! They eliminate tedium by always referring to a central configuration file
! for the details of your site configuration. Most also include some command 
! line help with the "-h" option, making them easier to learn and use.
! </para>
! 
! <para>Most generate Slonik scripts that are printed to STDOUT. 
! At one time, the commands were passed directly to <xref linkend="slonik"> for execution. 
  Unfortunately, this turned out to be a pretty large calibre
  <quote>foot gun</quote>, as minor typos on the command line led, on a
! couple of occasions, to pretty calamitous actions. The savvy administrator should review the script
! <emphasis>before</emphasis> piping it to <xref linkend="slonik">.</para>
  
  <sect3><title>Node/Cluster Configuration - cluster.nodes</title>

Index: firstdb.sgml
===================================================================
RCS file: /home/cvsd/slony1/slony1-engine/doc/adminguide/firstdb.sgml,v
retrieving revision 1.20
retrieving revision 1.21
diff -C2 -d -r1.20 -r1.21
*** firstdb.sgml	2 Aug 2006 18:34:58 -0000	1.20
--- firstdb.sgml	30 Jan 2007 19:23:19 -0000	1.21
***************
*** 140,146 ****
  and configuration is all done through the <xref linkend="slonik">
  tool. It is a specialized scripting aid that mostly calls stored
! procedures in the master/slave (node) databases.  The script to create
  the initial configuration for the simple master-slave setup of our
! <application>pgbench</application> database looks like this:
  
  <programlisting>
--- 140,184 ----
  and configuration is all done through the <xref linkend="slonik">
  tool. It is a specialized scripting aid that mostly calls stored
! procedures in the master/slave (node) databases. </para>
! 
! <sect3><title>Using the altperl scripts</title>
! 
! <para>
! Using the <xref linkend="altperl"> scripts is an easy way to get started.  The
! <command>slonik_build_env</command> script will generate output providing
! details you need to  omplete building a <filename>slon_tools.conf</filename>. 
! An example <filename>slon_tools.conf</filename> is provided in the distribution
! to get you started.  The altperl scripts will all reference
! this central configuration file in the future to ease administration. Once 
! slon_tools.conf has been created, you can proceed as follows:
! </para>
! 
! <programlisting>
! # Initialize cluster:
! $ slonik_init_cluster  | slonik 
! 
! # Start slon  (here 1 and 2 are node numbers)
! $ slon_start 1    
! $ slon_start 2
! 
! # Create Sets (here 1 is a set number)
! $ slonik_create_set 1             
! 
! # subscribe set to second node (1= set ID, 2= node ID)
! $ slonik_subscribe_set  2 | slonik
! </programlisting>
! 
! <para> You have now replicated your first database.  You can skip the following section
! of documentation if you'd like, which documents more of a <quote>bare-metal</quote> approach.</para>
! </sect3>
! 
! <sect3><title>Using slonik command directly</title>
! <para>The traditional approach to administering slony is to craft slonik
! commands directly. An example of this given here. </para>
! 
! 
! <para> The script to create
  the initial configuration for the simple master-slave setup of our
! <application>pgbench</application> database looks like this:</para>
  
  <programlisting>
***************
*** 203,207 ****
  	store listen (origin=2, provider = 2, receiver =1);
  _EOF_
! </programlisting></para>
  
  <para>Is the <application>pgbench</application> still running?  If
--- 241,245 ----
  	store listen (origin=2, provider = 2, receiver =1);
  _EOF_
! </programlisting>
  
  <para>Is the <application>pgbench</application> still running?  If
***************
*** 283,287 ****
  <application>pgbench</application> has completed, so that there are no
  new updates hitting the origin node, and that your slon sessions have
! caught up.
  
  <programlisting>
--- 321,325 ----
  <application>pgbench</application> has completed, so that there are no
  new updates hitting the origin node, and that your slon sessions have
! caught up.</para>
  
  <programlisting>
***************
*** 319,323 ****
  fi
  </programlisting>
- </para>
  
  <para>Note that there is somewhat more sophisticated documentation of
--- 357,360 ----


From xfade at lists.slony.info  Tue Jan 30 11:32:40 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www style.css
Message-ID: <20070130193240.EB0F12903F0@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv23007

Modified Files:
	style.css 
Log Message:
style.css update for h1

Index: style.css
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/style.css,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** style.css	30 Jan 2007 10:42:09 -0000	1.2
--- style.css	30 Jan 2007 19:32:38 -0000	1.3
***************
*** 6,9 ****
--- 6,15 ----
  }
  
+ h1{
+   margin: 0;
+   font-size: 18pt;
+   padding-bottom: 10px;
+ }
+ 
  .header{
    min-width: 782px;


From xfade at lists.slony.info  Tue Jan 30 11:37:35 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www layout.php
Message-ID: <20070130193735.410262903EF@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv23057

Modified Files:
	layout.php 
Log Message:
Add cvs page to menu.

Index: layout.php
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/layout.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** layout.php	30 Jan 2007 17:11:31 -0000	1.2
--- layout.php	30 Jan 2007 19:37:33 -0000	1.3
***************
*** 17,21 ****
    <div class="menu">
      <a href="/">Home</a> 
!     <a href="/cvs.html">CVS</a> 
      <a href="http://lists.slony.info/mailman/listinfo" title="Slony mailinglists">Mailinglists</a> 
    </div>
--- 17,21 ----
    <div class="menu">
      <a href="/">Home</a> 
!     <a href="/scm/">CVS</a> 
      <a href="http://lists.slony.info/mailman/listinfo" title="Slony mailinglists">Mailinglists</a> 
    </div>


From cbbrowne at lists.slony.info  Tue Jan 30 11:37:57 2007
From: cbbrowne at lists.slony.info (Chris Browne)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www admin.html
Message-ID: <20070130193757.080982903F1@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv23080

Modified Files:
	admin.html 
Log Message:
Add note about umask setting


Index: admin.html
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/admin.html,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** admin.html	29 Jan 2007 19:53:06 -0000	1.3
--- admin.html	30 Jan 2007 19:37:54 -0000	1.4
***************
*** 200,203 ****
--- 200,217 ----
            <tt>unison</tt>to "just do it."</p>
  
+           <h2>Other Environmental Stuff</h2>
+ 
+           <p>Those with login access, please add the entry:</p>
+           <pre>
+ umask 0002
+ </pre>
+ 
+           <p>to your <tt>.profile</tt> / <tt>.bashrc</tt> file.
+           That way, <i>group write</i> is permitted, by default.
+           It's very annoying, particularly in the web site area, if
+           one person checks out CVS with <tt>umask 0022</tt>,
+           thereby forbidding anyone else from updating any files
+           that they newly add.</p>
+ 
            <address>
              <a href="mailto:cbbrowne@ca.afilias.info">Christopher
***************
*** 205,209 ****
            </address><!-- Created: Thu Jan 25 11:38:58 EST 2007 -->
            <!-- hhmts start -->
!           Last modified: Mon Jan 29 14:52:13 EST 2007 
            <!-- hhmts end -->
          </td>
--- 219,223 ----
            </address><!-- Created: Thu Jan 25 11:38:58 EST 2007 -->
            <!-- hhmts start -->
!           Last modified: Tue Jan 30 14:37:16 EST 2007 
            <!-- hhmts end -->
          </td>


From cbbrowne at lists.slony.info  Tue Jan 30 11:48:37 2007
From: cbbrowne at lists.slony.info (Chris Browne)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-engine/doc/adminguide defineset.sgml
Message-ID: <20070130194838.0305A2903F2@main>

Update of /home/cvsd/slony1/slony1-engine/doc/adminguide
In directory main:/tmp/cvs-serv23126

Modified Files:
	defineset.sgml 
Log Message:
Mark Stosberg suggested some additional wording about defining tables.
It more explicitly recommends using a primary key, and provides an
example syntax to convert a unique/not null index to a primary key.
cbbrowne did some further wording changes.


Index: defineset.sgml
===================================================================
RCS file: /home/cvsd/slony1/slony1-engine/doc/adminguide/defineset.sgml,v
retrieving revision 1.25
retrieving revision 1.26
diff -C2 -d -r1.25 -r1.26
*** defineset.sgml	2 Aug 2006 18:34:57 -0000	1.25
--- defineset.sgml	30 Jan 2007 19:48:35 -0000	1.26
***************
*** 43,47 ****
  <emphasis>candidate</emphasis> primary key, that is, some index on a
  combination of fields that is both UNIQUE and NOT NULL, then you can
! specify the key, as in</para>
  
  <programlisting>
--- 43,47 ----
  <emphasis>candidate</emphasis> primary key, that is, some index on a
  combination of fields that is both UNIQUE and NOT NULL, then you can
! specify that key, as shown in the following example. </para>
  
  <programlisting>
***************
*** 52,55 ****
--- 52,69 ----
  </programlisting>
  
+ <para> However, once you have come this far, there is little reason not
+ to just declare some suitable index to be a primary key, which requires
+ that the columns involved are NOT NULL, and which will establish a unique
+ index. Here is an example of this: </para>
+ 
+ <programlisting>
+ DROP INDEX my_table_name_col1_col2_uniq_idx;
+ ALTER TABLE my_table_name ADD PRIMARY KEY (col1, col2);
+ </programlisting>
+ 
+ <para>If your application is not somehow referencing the index by name,
+ the this should not lose you anything, and it gives you the clear design
+ benefit that a primary key has been declared for the table. </para>
+ 
  <para> Notice that while you need to specify the namespace for the
  table, you must <emphasis>not</emphasis> specify the namespace for the
***************
*** 68,78 ****
  <para> It is not terribly important whether you pick a
  <quote>true</quote> primary key or a mere <quote>candidate primary
! key;</quote> it is, however, recommended that you have one of those
! instead of having &slony1; populate the PK column for you.  If you
! don't have a suitable primary key, that means that the table hasn't
! got any mechanism from your application's standpoint for keeping
! values unique.  &slony1; may therefore introduce a new failure mode
! for your application, and this also implies that you had a way to
! enter confusing data into the database.</para>
  </sect2>
  
--- 82,92 ----
  <para> It is not terribly important whether you pick a
  <quote>true</quote> primary key or a mere <quote>candidate primary
! key;</quote> it is, however, strongly recommended that you have one of
! those instead of having &slony1; populate the PK column for you. If you
! don't have a suitable primary key, that means that the table hasn't got
! any mechanism, from your application's standpoint, for keeping values
! unique. &slony1; may, therefore, introduce a new failure mode for your
! application, and this also implies that you had a way to enter confusing
! data into the database.</para>
  </sect2>
  


From cbbrowne at lists.slony.info  Tue Jan 30 11:57:13 2007
From: cbbrowne at lists.slony.info (Chris Browne)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-engine/doc/adminguide adminscripts.sgml
Message-ID: <20070130195713.D842E2903F3@main>

Update of /home/cvsd/slony1/slony1-engine/doc/adminguide
In directory main:/tmp/cvs-serv23162/doc/adminguide

Modified Files:
	adminscripts.sgml 
Log Message:
Per Brian A. Seklecki, added to the tools directory a script for managing
slon startup in conjunction with FreeBSD Ports.

Also added some (brief) documentation to the adminscripts section of the
admin guide.


Index: adminscripts.sgml
===================================================================
RCS file: /home/cvsd/slony1/slony1-engine/doc/adminguide/adminscripts.sgml,v
retrieving revision 1.46
retrieving revision 1.47
diff -C2 -d -r1.46 -r1.47
*** adminscripts.sgml	30 Jan 2007 19:23:19 -0000	1.46
--- adminscripts.sgml	30 Jan 2007 19:57:11 -0000	1.47
***************
*** 653,656 ****
--- 653,666 ----
  </sect3>
  </sect2>
+ 
+ <sect2 id="bsd-ports-profile"> <title> <filename> slon.in-profiles </filename> </title>
+ <subtitle> Apache-Style profiles for FreeBSD <filename>ports/databases/slony/*</filename> </subtitle>
+ 
+ <para> In the tools area, <filename>slon.in-profiles</filename> is a
+ script that might be used to start up &lslon; instances at the time of
+ system startup.  It is designed to interact with the FreeBSD Ports
+ system.</para>
+ 
+ </sect2>
  </sect1>
  <!-- Keep this comment at the end of the file


From cbbrowne at lists.slony.info  Tue Jan 30 11:57:13 2007
From: cbbrowne at lists.slony.info (Chris Browne)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-engine/tools slon.in-profiles
Message-ID: <20070130195713.BC3AB2903F2@main>

Update of /home/cvsd/slony1/slony1-engine/tools
In directory main:/tmp/cvs-serv23162/tools

Added Files:
	slon.in-profiles 
Log Message:
Per Brian A. Seklecki, added to the tools directory a script for managing
slon startup in conjunction with FreeBSD Ports.

Also added some (brief) documentation to the adminscripts section of the
admin guide.


--- NEW FILE: slon.in-profiles ---
#!/bin/sh
#
# $FreeBSD$
# Modified by Brian A. Seklecki <bseklecki@collaborativefusion.com>
#                               <lavalamp@spiritual-machines.org>
# $Id: slon.in-profiles,v 1.1 2007-01-30 19:57:11 cbbrowne Exp $ 
#

# sed -e 's/%%PREFIX%%/\/usr\/local/g' < slon.in > slon

# PROVIDE: slon
# REQUIRE: postgresql
# KEYWORD: shutdown

. "/etc/rc.subr"

name="slon"
rcvar=`set_rcvar`

load_rc_config "$name"
_pidprefix="/var/run/${name}"
pidfile="${_pidprefix}.pid" # Used as fall-through in event of no profiles

# From global rc.conf(5); if unset, set them here
[ -z "$slon_enable" ]       && slon_enable="NO"
[ -z "$slon_profiles" ]     && slon_profiles=""

configfile_path="/usr/local/etc/${name}.conf"
command_args="-f ${configfile_path} -p ${pidfile} &"
required_files="${configfile_path}"

# Example: User has to define the following
# $slon_enable=true
# $slon_profiles="sex drugs unix"
# $slon_unix_configfile="/path/to.conf"
# $slon_sex_flags="-hawtte"

command="/usr/local/bin/slon"

isProfile() {
        match=0;
        for curMember in $slon_profiles; do
                if [ "$curMember" = "$1" ]; then
                        echo "Match"
                        match=1
                fi
        done
        return $match;
}



if [ -n "$2" ]; then
	profile="$2" # A profile argument has been given (presumably)
	if [ "x${slon_profiles}" != "x" ]; then # This checks that profiles are indeed defined
		# Now let's check to make sure that both the profile, the profile's config path variable, config file exists
		pidfile="${_pidprefix}-${profile}.pid"
		configfile_varname="\$${name}_${profile}_configfile" # Basic string substitution gets variable name
		eval configfile_path="${configfile_varname}"
		isProfile $profile
		searchForProfile=$?
		# testing for true
		if [ -z "$configfile_varname" -o ! -r "$configfile_path" -o $searchForProfile -lt 1 ]; then
			echo "$0: no such profile defined, profile config file defined, or cant read profile config file!";
			exit 1;
		fi
		required_files=${configfile_path}
		eval command_args="\$${name}_${profile}_flags"
	else
		echo "$0: extra profile argument ignored, no profiles defined"
	fi
	

else
	# We get to here if $2 is not defined at command line, but we do have profiles
	# This block uses recursion to call ourself with each-profile defined as $2
	if [ "x${slon_profiles}" != "x" -a "x$1" != "x" ]; then
		if [ "x$1" != "xrestart" ]; then
			for profile in ${slon_profiles}; do
				echo "===> ${name} profile: ${profile}"
				/usr/local/etc/rc.d/${name} $1 ${profile}
				retcode="$?"
				if [ "0${retcode}" -ne 0 ]; then
					failed="${profile} (${retcode}) ${failed:-}"
				else
					success="${profile} ${success:-}"
				fi
			done
			exit 0
		else
			restart_precmd=""
		fi
	fi
# else = no profile argument given
fi

run_rc_command "$1"


From xfade at lists.slony.info  Tue Jan 30 11:57:29 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/content frontpage.txt
Message-ID: <20070130195729.E20A72903F5@main>

Update of /home/cvsd/slony1/slony1-www/content
In directory main:/tmp/cvs-serv23196

Added Files:
	frontpage.txt 
Log Message:
Extra info for frontpage.

--- NEW FILE: frontpage.txt ---
Slony-I 1.2.6
#
          <p>At long last, here is version 1.2.6. It has many
          enhancements as listed in the <a href=
          "http://pgfoundry.org/frs/shownotes.php?release_id=730">Release
          Notes</a> .</p>

          <p>This has been run thru the <a href=
          "http://linuxdatabases.info/info/releasechecklist.html">Release
          Checklist</a></p>

          <p>There are two tarballs available <a href=
          "http://pgfoundry.org/frs/?group_id=1000122">here</a></p>

---
Slony-I and PostgreSQL 8.1
#
          <p>There is a known incompatibility of versions earlier
          than 1.1.5 with version 8.1; you can expect to see the
          following error message when compiling:</p>
          <pre>
slony1_funcs.c:1081: error: too many arguments to function
`Async_Unlisten' 
</pre>

          <p>A patch for both version 1.1 "STABLE" and CVS HEAD has
          been committed to CVS; look at both CVS HEAD as well as
          <tt>REL_1_1_STABLE</tt>. It is in the 1.1.5 release
          candidate described above.</p>
---
Upgrading Slony-I
#
          <p>Beginning with version 1.0.5 the slon replication
          engine refuses to work against any database that does not
          have the stored procedures for the same version loaded or
          where the shared object containing the C language support
          functions and the log trigger does not match the version
          number.</p>

          <p>This means that the Slony installation on all nodes in
          a cluster must be upgraded at once.</p>

          <p>The proper upgrade procedure is this:</p>

          <ol>
            <li>Stop the slon replication engine on all nodes.</li>

            <li>Install the new Slony version on all nodes.</li>

            <li>Execute a slonik script containing the command
              <pre>

    update functions (id = );
</pre>for every node in the cluster.
            </li>

            <li>Start all slon replication engines.</li>
          </ol>

          <p>For more details, see also <a href=
          "./adminguide/slony1-1.2.6/doc/adminguide/slonyupgrade.html">
          Upgrading Slony-I</a> .</p>

---
Libpq requirements
#
          <p>The multithreaded replication engine requires the
          libpq client library to be compiled with
          --enable-thread-safety on certain operating systems.
          Known are thus far Solaris and AIX. Other operating
          systems are known to not require this (Linux-X86,
          FreeBSD-X86, FreeBSD-Alpha, OpenBSD-Sparc64 and OSX). The
          configuration script is broken with respect to the
          --enable-thread-safety switch for Solaris. Please apply
          this patch, configure and recompile libpq: <a href=
          "http://developer.postgresql.org/%7Ewieck/slony1/download/threadsafe-libpq-742.diff.gz">
          threadsafe-libpq-742.diff.gz.</a></p>

---
RPMs
http://pgfoundry.org/projects/slony1
          <p>RPM files for some versions of Red Hat Linux are
          available <a href=
          "http://pgfoundry.org/projects/slony1">here</a> ,
          including SRPM (Source RPM) files that may be helpful if
          you wish to generate RPM files for distributions not yet
          supported.</p>

          <p>This project is released under the Berkeley/BSD
          license.</p>


From xfade at lists.slony.info  Tue Jan 30 11:58:57 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www index.php
Message-ID: <20070130195857.96CA22903F7@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv23204

Modified Files:
	index.php 
Log Message:
Extra info for frontpage

Index: index.php
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/index.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** index.php	30 Jan 2007 19:23:18 -0000	1.2
--- index.php	30 Jan 2007 19:58:55 -0000	1.3
***************
*** 35,38 ****
--- 35,56 ----
  	}
  	echo layout_introblock($title,$link,$text);
+ 
+         $fp = fopen('./content/frontpage.txt','r');
+         if ($fp){
+                 $text="";
+                 while (!feof($fp)){
+ 			 $buf=fgets($fp,256);
+ 			 if (strpos($buf,'---')!==false){
+ 				if ($text != "") echo layout_defaultblock($title,$link,$text);
+ 				$text = "";
+ 				$title = @fgets($fp,256);
+ 				$link = @fgets($fp,256);
+ 			 } else {
+ 				$text .= $buf;
+ 			 }
+ 		}
+                 fclose($fp);
+         }
+ 
  	echo layout_leftcol_stop();
  	echo layout_rightcol_start();


From xfade at lists.slony.info  Tue Jan 30 12:01:58 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/content frontpage.txt
Message-ID: <20070130200158.50DCF2902DE@main>

Update of /home/cvsd/slony1/slony1-www/content
In directory main:/tmp/cvs-serv23237

Modified Files:
	frontpage.txt 
Log Message:
Fix frontpage

Index: frontpage.txt
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/content/frontpage.txt,v
retrieving revision 1.1
retrieving revision 1.2
diff -C2 -d -r1.1 -r1.2
*** frontpage.txt	30 Jan 2007 19:57:27 -0000	1.1
--- frontpage.txt	30 Jan 2007 20:01:56 -0000	1.2
***************
*** 1,2 ****
--- 1,3 ----
+ ---
  Slony-I 1.2.6
  #


From cbbrowne at lists.slony.info  Wed Jan 31 09:42:03 2007
From: cbbrowne at lists.slony.info (Chris Browne)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www admin.html
Message-ID: <20070131174203.B9565290386@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv23925

Modified Files:
	admin.html 
Log Message:
Added some notes on how the web site is set up.


Index: admin.html
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/admin.html,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** admin.html	30 Jan 2007 19:37:54 -0000	1.4
--- admin.html	31 Jan 2007 17:42:01 -0000	1.5
***************
*** 214,217 ****
--- 214,260 ----
            that they newly add.</p>
  
+           <h1>Editing the Web Site</h1>
+ 
+           <p>Niels Breet has set things up where there is a pair of
+           central PHP scripts, <tt>index.php</tt>, and
+           <tt>layout.php</tt>, which control rendering of the
+           site.</p>
+ 
+           <p>Web site <i>content</i> resides in the
+           <tt>content</tt> directory as a set of <tt>.txt</tt>
+           files.</p>
+ 
+           <p>These pages consist of some lightly formatted
+           material:</p>
+ 
+           <ul>
+             <li>There is a "title" on the first line;</li>
+ 
+             <li>There is a line consisting of "#", marking a
+             barrier between title and other material;</li>
+ 
+             <li>Following that barrier is a set of HTML text that
+             will be rendered as the body of the web page</li>
+           </ul>
+ 
+           <p>There are also some pages that consist of
+           lightly-formatted news material, such as
+           <tt>news.txt</tt>. This file consists of a set of news
+           items, formatted thus:</p>
+ 
+           <ul>
+             <li>A line consisting of "---"</li>
+ 
+             <li>A title for the item</li>
+ 
+             <li>A URL for that title to point at (<i>e.g.</i> - if
+             you click on the title, you head to the URL)</li>
+ 
+             <li>A possibly-multi-line chunk of HTML to describe the
+             piece of news.</li>
+ 
+             <li>A line consisting of "---"</li>
+           </ul>
+ 
            <address>
              <a href="mailto:cbbrowne@ca.afilias.info">Christopher
***************
*** 219,223 ****
            </address><!-- Created: Thu Jan 25 11:38:58 EST 2007 -->
            <!-- hhmts start -->
!           Last modified: Tue Jan 30 14:37:16 EST 2007 
            <!-- hhmts end -->
          </td>
--- 262,266 ----
            </address><!-- Created: Thu Jan 25 11:38:58 EST 2007 -->
            <!-- hhmts start -->
!           Last modified: Wed Jan 31 12:41:19 EST 2007 
            <!-- hhmts end -->
          </td>


From xfade at lists.slony.info  Wed Jan 31 09:56:59 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www admin.html
Message-ID: <20070131175700.0256F2903B4@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv23951

Modified Files:
	admin.html 
Log Message:
Clarify the second line in a content file

Index: admin.html
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/admin.html,v
retrieving revision 1.5
retrieving revision 1.6
diff -C2 -d -r1.5 -r1.6
*** admin.html	31 Jan 2007 17:42:01 -0000	1.5
--- admin.html	31 Jan 2007 17:56:57 -0000	1.6
***************
*** 231,238 ****
              <li>There is a "title" on the first line;</li>
  
!             <li>There is a line consisting of "#", marking a
!             barrier between title and other material;</li>
  
!             <li>Following that barrier is a set of HTML text that
              will be rendered as the body of the web page</li>
            </ul>
--- 231,238 ----
              <li>There is a "title" on the first line;</li>
  
!             <li>There is a URL for that title on the second line;
! 	    </li>
  
!             <li>Following that is a set of HTML text that
              will be rendered as the body of the web page</li>
            </ul>


From xfade at lists.slony.info  Wed Jan 31 10:06:42 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www index.php layout.php style.css
Message-ID: <20070131180642.317DA2903F8@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv23970

Modified Files:
	index.php layout.php style.css 
Log Message:
Alter news display some more.

Index: layout.php
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/layout.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** layout.php	30 Jan 2007 19:37:33 -0000	1.3
--- layout.php	31 Jan 2007 18:06:39 -0000	1.4
***************
*** 103,107 ****
  }
  
! function layout_defaultblock($title="",$link="",$text=""){
  $output = '
      <div class="intro-header">
--- 103,107 ----
  }
  
! function layout_defaultblock($title="",$link="",$text="",$stamp="",$poster=""){
  $output = '
      <div class="intro-header">
***************
*** 115,120 ****
          <div class="top-right"></div>
        </div>
!       <div class="text"> 
  	'.$text.'
        </div>
        <div class="bottom">
--- 115,125 ----
          <div class="top-right"></div>
        </div>
!       <div class="text">
  	'.$text.'
+ 	';
+ if ($stamp != ""){
+     $output .= '<div class="news-stamp">'.$poster.' <i>'.$stamp.'</i></div>
+ }
+     $output .='
        </div>
        <div class="bottom">

Index: style.css
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/style.css,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** style.css	30 Jan 2007 19:32:38 -0000	1.3
--- style.css	31 Jan 2007 18:06:39 -0000	1.4
***************
*** 193,195 ****
    overflow: hidden;
    margin-right: 2%;
! }
\ No newline at end of file
--- 193,201 ----
    overflow: hidden;
    margin-right: 2%;
! }
! 
! .news-stamp{
!   width: 100%;
!   text-align: right;
!   float: right;
! }

Index: index.php
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/index.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** index.php	30 Jan 2007 19:58:55 -0000	1.3
--- index.php	31 Jan 2007 18:06:39 -0000	1.4
***************
*** 62,69 ****
  			 $buf=fgets($fp,256);
  			 if (strpos($buf,'---')!==false){
! 				if ($text != "") echo layout_defaultblock($title,$link,$text);
  				$text = "";
  				$title = @fgets($fp,256);
  				$link = @fgets($fp,256);
  			 } else {
  				$text .= $buf;
--- 62,71 ----
  			 $buf=fgets($fp,256);
  			 if (strpos($buf,'---')!==false){
! 				if ($text != "") echo layout_defaultblock($title,$link,$text,$stamp,$poster);
  				$text = "";
  				$title = @fgets($fp,256);
  				$link = @fgets($fp,256);
+ 				$stamp = @fgets($fp,256);
+ 				$poster = @fgets($fp,256);
  			 } else {
  				$text .= $buf;


From xfade at lists.slony.info  Wed Jan 31 10:06:42 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www/content news.txt
Message-ID: <20070131180642.2470A2903A5@main>

Update of /home/cvsd/slony1/slony1-www/content
In directory main:/tmp/cvs-serv23970/content

Modified Files:
	news.txt 
Log Message:
Alter news display some more.

Index: news.txt
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/content/news.txt,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** news.txt	30 Jan 2007 17:08:02 -0000	1.2
--- news.txt	31 Jan 2007 18:06:40 -0000	1.3
***************
*** 2,10 ****
  Slony-I New Web Site!
  http://main.slony.info
! Dateline: 2009-01-01 - We are pleased to announce the release of the new Slony-I web site at <tt>main.slony.info</tt>.
  ---
  Slony-I New CVS Site!
  http://main.slony.info/cvs.html
! 2007-01-20 The Slony-I project is now making active use of CVS repositories at <tt>cvs.slony.info</tt>; this replaces the former
  CVS repositories at gBorg.  We thank the gBorg operators for their support over the last few years, and Command Prompt for their provision of hardware, administrative, and hosting services for <tt>cvs.slony.info</tt>.
  ---
--- 2,14 ----
  Slony-I New Web Site!
  http://main.slony.info
! 2007-01-XX
! Chris Browne
! We are pleased to announce the release of the new Slony-I web site at <tt>main.slony.info</tt>.
  ---
  Slony-I New CVS Site!
  http://main.slony.info/cvs.html
! 2007-01-20
! <a href="mailto:cbbrowne@acm.org">Chris Browne</a>
! The Slony-I project is now making active use of CVS repositories at <tt>cvs.slony.info</tt>; this replaces the former
  CVS repositories at gBorg.  We thank the gBorg operators for their support over the last few years, and Command Prompt for their provision of hardware, administrative, and hosting services for <tt>cvs.slony.info</tt>.
  ---


From xfade at lists.slony.info  Wed Jan 31 10:08:01 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www layout.php
Message-ID: <20070131180801.04F272903F8@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv24003

Modified Files:
	layout.php 
Log Message:
Oops

Index: layout.php
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/layout.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** layout.php	31 Jan 2007 18:06:39 -0000	1.4
--- layout.php	31 Jan 2007 18:07:58 -0000	1.5
***************
*** 119,123 ****
  	';
  if ($stamp != ""){
!     $output .= '<div class="news-stamp">'.$poster.' <i>'.$stamp.'</i></div>
  }
      $output .='
--- 119,123 ----
  	';
  if ($stamp != ""){
!     $output .= '<div class="news-stamp">'.$poster.' <i>'.$stamp.'</i></div>';
  }
      $output .='


From xfade at lists.slony.info  Wed Jan 31 10:16:03 2007
From: xfade at lists.slony.info (Niels Breet)
Date: Tue Feb 13 08:59:25 2007
Subject: [Slony1-commit] slony1-www style.css
Message-ID: <20070131181603.9D0C42903FD@main>

Update of /home/cvsd/slony1/slony1-www
In directory main:/tmp/cvs-serv24065

Modified Files:
	style.css 
Log Message:
Style fix

Index: style.css
===================================================================
RCS file: /home/cvsd/slony1/slony1-www/style.css,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** style.css	31 Jan 2007 18:06:39 -0000	1.4
--- style.css	31 Jan 2007 18:16:01 -0000	1.5
***************
*** 196,201 ****
  
  .news-stamp{
-   width: 100%;
    text-align: right;
!   float: right;
  }
--- 196,201 ----
  
  .news-stamp{
    text-align: right;
!   height: 20px;
!   font-size: 80%;
  }


