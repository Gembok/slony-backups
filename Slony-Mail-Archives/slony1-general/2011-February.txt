From h.mia at hawarIT.com  Mon Feb  7 22:40:51 2011
From: h.mia at hawarIT.com (Hanif)
Date: Tue, 8 Feb 2011 06:40:51 +0000 (UTC)
Subject: [Slony1-general]
	=?utf-8?q?How_sensible_is_turning_off_synchronou?=
	=?utf-8?q?s=5Fcommiton=09a_Slony_slave_while_leaving_it_on_on_the_?=
	=?utf-8?q?master=3F?=
References: <db471ace1003250837h6ce5c87av6920220cb112f4d3@mail.gmail.com>
Message-ID: <loom.20110208T073301-488@post.gmane.org>

Peter Geoghegan <peter.geoghegan86 at ...> writes:

> 
> Hello,
> 
> I run a Slony cluster (2.0.2, PG 8.4 on master, 8.3 on 5 slaves) where
> an application that runs on each slave should commit transactions
> quickly - it's supposed to be a realtime system. I have decided that
> the trade-off between performance and data integrity offered by
> turning off synchronous_commit in postgresql.conf on each slave (but
> not the master) is acceptable - the window for data loss is very
> small, as all the activity is small transactions. Obviously, they
> aren't touching replicated tables, but their own tables that aren't in
> any replication set. We don't perform cascading or failover - it's a
> rather simple set-up, as Slony clusters go.
> 
> My concern with turning off synchronous_commit is the potential that
> it might break replication, if a slave and the master were left in an
> inconsistent state. Breaking replication is far more expensive to me
> than losing one of my small transactions.
> 
> I am aware that it's possible to specify whether or not
> synchronous_commit is used on a transaction by transaction basis, but
> it isn't apparent how I can do this with the Qt database driver that I
> use, that wraps libpq. I'm using implicit transactions by calling
> pl/pgSQL functions on the slaves (every modifying operation is a
> function call). Perhaps that should be the next thing I investigate if
> turning synchronous_commit off server wide in postgresql.conf on
> slaves turns out to be a bad idea.
> 
> What sort of risk am I assuming specifically to replication by turning
> off synchronous_commit on the slaves but not on the master?
> 
> Thanks,
> Peter Geoghegan
> 

Dear Peter,

Basically I'm new in Slony replication. I have to setup a replication between an
8.4 master and a 8.3 slave in windows environment. From documentation I noticed
master and slave should be same version. But searching the web on "slony 8.4
master 8.3 slave" I run into your post. From this post it seems it is perfectly
normal you can run slony on 8.4 master and 8.3 slave. 

Could you tell me in may be max 5 minutes if I really should upgrade now or just
go to get things working. Any url on this issue already would be very helpful. 

kind regards

Hanif
h.mia at hawarit.com




From peter.geoghegan86 at gmail.com  Tue Feb  8 05:01:23 2011
From: peter.geoghegan86 at gmail.com (Peter Geoghegan)
Date: Tue, 8 Feb 2011 13:01:23 +0000
Subject: [Slony1-general] How sensible is turning off
 synchronous_commiton a Slony slave while leaving it on on the master?
In-Reply-To: <loom.20110208T073301-488@post.gmane.org>
References: <db471ace1003250837h6ce5c87av6920220cb112f4d3@mail.gmail.com>
	<loom.20110208T073301-488@post.gmane.org>
Message-ID: <AANLkTinOi2BtgtUSn9ah+=iBhPAzF9ApkygME1PaJU3N@mail.gmail.com>

Hanif,

Slony versions must be *identical*. However, postgres versions can be
different major releases. Before pg_upgrade, slony was a popular way
of upgrading large databases.


-- 
Regards,
Peter Geoghegan

From guillaume at lelarge.info  Tue Feb  8 14:52:52 2011
From: guillaume at lelarge.info (Guillaume Lelarge)
Date: Tue, 08 Feb 2011 23:52:52 +0100
Subject: [Slony1-general] How sensible is turning off
 synchronous_commiton a Slony slave while leaving it on on the master?
In-Reply-To: <AANLkTinOi2BtgtUSn9ah+=iBhPAzF9ApkygME1PaJU3N@mail.gmail.com>
References: <db471ace1003250837h6ce5c87av6920220cb112f4d3@mail.gmail.com>	<loom.20110208T073301-488@post.gmane.org>
	<AANLkTinOi2BtgtUSn9ah+=iBhPAzF9ApkygME1PaJU3N@mail.gmail.com>
Message-ID: <4D51C944.4020609@lelarge.info>

Le 08/02/2011 14:01, Peter Geoghegan a ?crit :
> [...]
> Slony versions must be *identical*. However, postgres versions can be
> different major releases. Before pg_upgrade, slony was a popular way
> of upgrading large databases.
> 

Still is :)

Sadly, the number of users with <8.4 are really much bigger than the
number of users with 8.4.


-- 
Guillaume
 http://www.postgresql.fr
 http://dalibo.com

From ajs at crankycanuck.ca  Tue Feb  8 15:34:02 2011
From: ajs at crankycanuck.ca (Andrew Sullivan)
Date: Tue, 8 Feb 2011 18:34:02 -0500
Subject: [Slony1-general] How sensible is turning
	off	synchronous_commiton a Slony slave while leaving it on on
	the	master?
In-Reply-To: <4D51C944.4020609@lelarge.info>
References: <db471ace1003250837h6ce5c87av6920220cb112f4d3@mail.gmail.com>
	<loom.20110208T073301-488@post.gmane.org>
	<AANLkTinOi2BtgtUSn9ah+=iBhPAzF9ApkygME1PaJU3N@mail.gmail.com>
	<4D51C944.4020609@lelarge.info>
Message-ID: <20110208233401.GG27544@shinkuro.com>

On Tue, Feb 08, 2011 at 11:52:52PM +0100, Guillaume Lelarge wrote:
> Sadly, the number of users with <8.4 are really much bigger than the
> number of users with 8.4.

I don't find this sad.  I find this an indication that people have
things important to them in Postgres databases, and that they're
naturally conservative about touching those things.  It's a kind of
victory when you have an installed base.

(It's also a scourge, of course, but let's celebrate!)

A

-- 
Andrew Sullivan
ajs at crankycanuck.ca

From JanWieck at Yahoo.com  Tue Feb  8 19:27:06 2011
From: JanWieck at Yahoo.com (Jan Wieck)
Date: Tue, 08 Feb 2011 22:27:06 -0500
Subject: [Slony1-general] How sensible is
 turning	off	synchronous_commiton a Slony slave while leaving it on
 on	the	master?
In-Reply-To: <20110208233401.GG27544@shinkuro.com>
References: <db471ace1003250837h6ce5c87av6920220cb112f4d3@mail.gmail.com>	<loom.20110208T073301-488@post.gmane.org>	<AANLkTinOi2BtgtUSn9ah+=iBhPAzF9ApkygME1PaJU3N@mail.gmail.com>	<4D51C944.4020609@lelarge.info>
	<20110208233401.GG27544@shinkuro.com>
Message-ID: <4D52098A.6070308@Yahoo.com>

On 2/8/2011 6:34 PM, Andrew Sullivan wrote:
> On Tue, Feb 08, 2011 at 11:52:52PM +0100, Guillaume Lelarge wrote:
>>  Sadly, the number of users with<8.4 are really much bigger than the
>>  number of users with 8.4.
>
> I don't find this sad.  I find this an indication that people have
> things important to them in Postgres databases, and that they're
> naturally conservative about touching those things.  It's a kind of
> victory when you have an installed base.
>
> (It's also a scourge, of course, but let's celebrate!)

I also am not convinced yet that the time of dump+restore upgrades is 
over for good. I may change my mind about that in 5 years or so, but 
right now, I'd say let's be prepared.


Jan

-- 
Anyone who trades liberty for security deserves neither
liberty nor security. -- Benjamin Franklin

From h.mia at hawarit.com  Tue Feb  8 23:20:31 2011
From: h.mia at hawarit.com (hanif)
Date: Wed, 9 Feb 2011 07:20:31 +0000 (UTC)
Subject: [Slony1-general]
	=?utf-8?q?How_sensible_is_turning_off_synchronou?=
	=?utf-8?q?s=5Fcommiton_a_Slony_slave_while_leaving_it_on_on_the_ma?=
	=?utf-8?q?ster=3F?=
References: <db471ace1003250837h6ce5c87av6920220cb112f4d3@mail.gmail.com>
	<loom.20110208T073301-488@post.gmane.org>
	<AANLkTinOi2BtgtUSn9ah+=iBhPAzF9ApkygME1PaJU3N@mail.gmail.com>
Message-ID: <loom.20110209T080426-378@post.gmane.org>

Peter Geoghegan <peter.geoghegan86 at ...> writes:

> 
> Hanif,
> 
> Slony versions must be *identical*. However, postgres versions can be
> different major releases. Before pg_upgrade, slony was a popular way
> of upgrading large databases.
> 


Dear Peter,
As i mentioned earlier, i am a new at postgreSQL.Could you please clarify me 
about REPLICATION of PostgreSQL 8.4.6(master) database with PostgreSQL 8.3.6
(slave) database using slony-I?
When i excute slonik.exe command on master node it seems listening but on the 
slave node it shows error!


