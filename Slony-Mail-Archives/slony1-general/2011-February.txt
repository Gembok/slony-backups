From h.mia at hawarIT.com  Mon Feb  7 22:40:51 2011
From: h.mia at hawarIT.com (Hanif)
Date: Tue, 8 Feb 2011 06:40:51 +0000 (UTC)
Subject: [Slony1-general]
	=?utf-8?q?How_sensible_is_turning_off_synchronou?=
	=?utf-8?q?s=5Fcommiton=09a_Slony_slave_while_leaving_it_on_on_the_?=
	=?utf-8?q?master=3F?=
References: <db471ace1003250837h6ce5c87av6920220cb112f4d3@mail.gmail.com>
Message-ID: <loom.20110208T073301-488@post.gmane.org>

Peter Geoghegan <peter.geoghegan86 at ...> writes:

> 
> Hello,
> 
> I run a Slony cluster (2.0.2, PG 8.4 on master, 8.3 on 5 slaves) where
> an application that runs on each slave should commit transactions
> quickly - it's supposed to be a realtime system. I have decided that
> the trade-off between performance and data integrity offered by
> turning off synchronous_commit in postgresql.conf on each slave (but
> not the master) is acceptable - the window for data loss is very
> small, as all the activity is small transactions. Obviously, they
> aren't touching replicated tables, but their own tables that aren't in
> any replication set. We don't perform cascading or failover - it's a
> rather simple set-up, as Slony clusters go.
> 
> My concern with turning off synchronous_commit is the potential that
> it might break replication, if a slave and the master were left in an
> inconsistent state. Breaking replication is far more expensive to me
> than losing one of my small transactions.
> 
> I am aware that it's possible to specify whether or not
> synchronous_commit is used on a transaction by transaction basis, but
> it isn't apparent how I can do this with the Qt database driver that I
> use, that wraps libpq. I'm using implicit transactions by calling
> pl/pgSQL functions on the slaves (every modifying operation is a
> function call). Perhaps that should be the next thing I investigate if
> turning synchronous_commit off server wide in postgresql.conf on
> slaves turns out to be a bad idea.
> 
> What sort of risk am I assuming specifically to replication by turning
> off synchronous_commit on the slaves but not on the master?
> 
> Thanks,
> Peter Geoghegan
> 

Dear Peter,

Basically I'm new in Slony replication. I have to setup a replication between an
8.4 master and a 8.3 slave in windows environment. From documentation I noticed
master and slave should be same version. But searching the web on "slony 8.4
master 8.3 slave" I run into your post. From this post it seems it is perfectly
normal you can run slony on 8.4 master and 8.3 slave. 

Could you tell me in may be max 5 minutes if I really should upgrade now or just
go to get things working. Any url on this issue already would be very helpful. 

kind regards

Hanif
h.mia at hawarit.com




